<!doctype html>
<html lang="zh-CN">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1207188090915424" crossorigin="anonymous"></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    

    <title>算法专题|前缀和 | weiweng的博客</title>
    <meta property="og:title" content="算法专题|前缀和 - weiweng的博客">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2024-01-22T08:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2024-01-22T08:00:00&#43;08:00'>
        
    <meta name="Keywords" content="golang,go语言,go语言笔记,博客,项目管理,软件架构">
    <meta name="description" content="算法专题|前缀和">
        
    <meta name="author" content="weiweng">
    <meta property="og:url" content="https://weiweng.top/post/2024-01-22-%E5%89%8D%E7%BC%80%E5%92%8C/">
    <link rel="shortcut icon" href='/favicon.ico'  type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>

<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://weiweng.top">
                        weiweng的博客
                    </a>
                
                <p class="description">记录所学所思所想，专注于Go语言、软件架构</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://weiweng.top">首页</a>
                    
                    <a  href="https://weiweng.top/tools/" title="工具">工具</a>
                    
                    <a  href="https://weiweng.top/read/" title="阅读">阅读</a>
                    
                    <a  href="https://weiweng.top/about/" title="关于">关于</a>
                    
                    <a  href="https://weiweng.top/archives/" title="归档">归档</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    <style type="text/css">
    .post-toc {
        position: fixed;
        width: 200px;
        margin-left: -210px;
        padding: 5px 10px;
        font-family: Athelas, STHeiti, Microsoft Yahei, serif;
        font-size: 12px;
        border: 1px solid rgba(0, 0, 0, .07);
        border-radius: 5px;
        background-color: rgba(255, 255, 255, 0.98);
        background-clip: padding-box;
        -webkit-box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        word-wrap: break-word;
        white-space: nowrap;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        z-index: 999;
        cursor: pointer;
        max-height: 70%;
        overflow-y: auto;
        overflow-x: hidden;
    }

    .post-toc .post-toc-title {
        width: 100%;
        margin: 0 auto;
        font-size: 20px;
        font-weight: 400;
        text-transform: uppercase;
        text-align: center;
    }

    .post-toc .post-toc-content {
        font-size: 15px;
    }

    .post-toc .post-toc-content>nav>ul {
        margin: 10px 0;
    }

    .post-toc .post-toc-content ul {
        padding-left: 20px;
        list-style: square;
        margin: 0.5em;
        line-height: 1.8em;
    }

    .post-toc .post-toc-content ul ul {
        padding-left: 15px;
        display: none;
    }

    @media print,
    screen and (max-width:1057px) {
        .post-toc {
            display: none;
        }
    }
</style>
<div class="post-toc" style="position: absolute; top: 188px;">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#初级练习">初级练习</a>
      <ul>
        <li><a href="#左右元素和的差值httpsleetcodecnproblemsleft-and-right-sum-differencesdescription"><strong><a href="https://leetcode.cn/problems/left-and-right-sum-differences/description/">左右元素和的差值</a></strong></a></li>
        <li><a href="#所有奇数长度子数组的和httpsleetcodecnproblemssum-of-all-odd-length-subarraysdescription"><strong><a href="https://leetcode.cn/problems/sum-of-all-odd-length-subarrays/description/">所有奇数长度子数组的和</a></strong></a></li>
        <li><a href="#找到最高海拔httpsleetcodecnproblemsfind-the-highest-altitudedescription"><strong><a href="https://leetcode.cn/problems/find-the-highest-altitude/description/">找到最高海拔</a></strong></a></li>
        <li><a href="#与车相交的点httpsleetcodecnproblemspoints-that-intersect-with-carsdescription"><strong><a href="https://leetcode.cn/problems/points-that-intersect-with-cars/description/">与车相交的点</a></strong></a></li>
        <li><a href="#逐步求和得到正数的最小值httpsleetcodecnproblemsminimum-value-to-get-positive-step-by-step-sumdescription"><strong><a href="https://leetcode.cn/problems/minimum-value-to-get-positive-step-by-step-sum/description/">逐步求和得到正数的最小值</a></strong></a></li>
        <li><a href="#检查是否区域内所有整数都被覆盖httpsleetcodecnproblemscheck-if-all-the-integers-in-a-range-are-covereddescription"><strong><a href="https://leetcode.cn/problems/check-if-all-the-integers-in-a-range-are-covered/description/">检查是否区域内所有整数都被覆盖</a></strong></a></li>
      </ul>
    </li>
    <li><a href="#中阶练习">中阶练习</a>
      <ul>
        <li><a href="#形成两个异或相等数组的三元组数目httpsleetcodecnproblemscount-triplets-that-can-form-two-arrays-of-equal-xordescription"><strong><a href="https://leetcode.cn/problems/count-triplets-that-can-form-two-arrays-of-equal-xor/description/">形成两个异或相等数组的三元组数目</a></strong></a></li>
        <li><a href="#矩阵区域和httpsleetcodecnproblemsmatrix-block-sumdescription"><strong><a href="https://leetcode.cn/problems/matrix-block-sum/description/">矩阵区域和</a></strong></a></li>
        <li><a href="#有序数组中差绝对值之和httpsleetcodecnproblemssum-of-absolute-differences-in-a-sorted-arraydescription"><strong><a href="https://leetcode.cn/problems/sum-of-absolute-differences-in-a-sorted-array/description/">有序数组中差绝对值之和</a></strong></a></li>
        <li><a href="#商店的最少代价httpsleetcodecnproblemsminimum-penalty-for-a-shopdescription"><strong><a href="https://leetcode.cn/problems/minimum-penalty-for-a-shop/description/">商店的最少代价</a></strong></a></li>
        <li><a href="#最大平均值和的分组httpsleetcodecnproblemslargest-sum-of-averagesdescription"><strong><a href="https://leetcode.cn/problems/largest-sum-of-averages/description/">最大平均值和的分组</a></strong></a></li>
        <li><a href="#子矩阵元素加-1httpsleetcodecnproblemsincrement-submatrices-by-onedescription"><strong><a href="https://leetcode.cn/problems/increment-submatrices-by-one/description/">子矩阵元素加 1</a></strong></a></li>
        <li><a href="#每个元音包含偶数次的最长子字符串httpsleetcodecnproblemsfind-the-longest-substring-containing-vowels-in-even-countsdescription"><strong><a href="https://leetcode.cn/problems/find-the-longest-substring-containing-vowels-in-even-counts/description/">每个元音包含偶数次的最长子字符串</a></strong></a></li>
        <li><a href="#连续数组httpsleetcodecnproblemscontiguous-arraydescription"><strong><a href="https://leetcode.cn/problems/contiguous-array/description/">连续数组</a></strong></a></li>
        <li><a href="#选择建筑的方案数httpsleetcodecnproblemsnumber-of-ways-to-select-buildingsdescription"><strong><a href="https://leetcode.cn/problems/number-of-ways-to-select-buildings/description/">选择建筑的方案数</a></strong></a></li>
        <li><a href="#长度为-3-的不同回文子序列httpsleetcodecnproblemsunique-length-3-palindromic-subsequencesdescription"><strong><a href="https://leetcode.cn/problems/unique-length-3-palindromic-subsequences/description/">长度为 3 的不同回文子序列</a></strong></a></li>
        <li><a href="#矩阵中最大的三个菱形和httpsleetcodecnproblemsget-biggest-three-rhombus-sums-in-a-griddescription"><strong><a href="https://leetcode.cn/problems/get-biggest-three-rhombus-sums-in-a-grid/description/">矩阵中最大的三个菱形和</a></strong></a></li>
        <li><a href="#长度最小的子数组httpsleetcodecnproblemsminimum-size-subarray-sumdescription"><strong><a href="https://leetcode.cn/problems/minimum-size-subarray-sum/description/">长度最小的子数组</a></strong></a></li>
        <li><a href="#最美子字符串的数目httpsleetcodecnproblemsnumber-of-wonderful-substringsdescription"><strong><a href="https://leetcode.cn/problems/number-of-wonderful-substrings/description/">最美子字符串的数目</a></strong></a></li>
        <li><a href="#蜡烛之间的盘子httpsleetcodecnproblemsplates-between-candlesdescription"><strong><a href="https://leetcode.cn/problems/plates-between-candles/description/">蜡烛之间的盘子</a></strong></a></li>
        <li><a href="#最大或值httpsleetcodecnproblemsmaximum-ordescription"><strong><a href="https://leetcode.cn/problems/maximum-or/description/">最大或值</a></strong></a></li>
        <li><a href="#二的幂数组中查询范围内的乘积httpsleetcodecnproblemsrange-product-queries-of-powersdescription"><strong><a href="https://leetcode.cn/problems/range-product-queries-of-powers/description/">二的幂数组中查询范围内的乘积</a></strong></a></li>
        <li><a href="#拿出最少数目的魔法豆httpsleetcodecnproblemsremoving-minimum-number-of-magic-beansdescription"><strong><a href="https://leetcode.cn/problems/removing-minimum-number-of-magic-beans/description/">拿出最少数目的魔法豆</a></strong></a></li>
        <li><a href="#等值距离和httpsleetcodecnproblemssum-of-distancesdescription"><strong><a href="https://leetcode.cn/problems/sum-of-distances/description/">等值距离和</a></strong></a></li>
        <li><a href="#使数组中的所有元素都等于零httpsleetcodecnproblemsapply-operations-to-make-all-array-elements-equal-to-zerodescription"><strong><a href="https://leetcode.cn/problems/apply-operations-to-make-all-array-elements-equal-to-zero/description/">使数组中的所有元素都等于零</a></strong></a></li>
        <li><a href="#所有排列中的最大和httpsleetcodecnproblemsmaximum-sum-obtained-of-any-permutationdescription"><strong><a href="https://leetcode.cn/problems/maximum-sum-obtained-of-any-permutation/description/">所有排列中的最大和</a></strong></a></li>
        <li><a href="#连续的子数组和httpsleetcodecnproblemscontinuous-subarray-sumdescription"><strong><a href="https://leetcode.cn/problems/continuous-subarray-sum/description/">连续的子数组和</a></strong></a></li>
        <li><a href="#元素和小于等于阈值的正方形的最大边长httpsleetcodecnproblemsmaximum-side-length-of-a-square-with-sum-less-than-or-equal-to-thresholddescription"><strong><a href="https://leetcode.cn/problems/maximum-side-length-of-a-square-with-sum-less-than-or-equal-to-threshold/description/">元素和小于等于阈值的正方形的最大边长</a></strong></a></li>
        <li><a href="#统计美丽子字符串-ihttpsleetcodecnproblemscount-beautiful-substrings-idescription"><strong><a href="https://leetcode.cn/problems/count-beautiful-substrings-i/description/">统计美丽子字符串 I</a></strong></a></li>
      </ul>
    </li>
    <li><a href="#高阶练习">高阶练习</a>
      <ul>
        <li><a href="#元素和为目标值的子矩阵数量httpsleetcodecnproblemsnumber-of-submatrices-that-sum-to-targetdescription"><strong><a href="https://leetcode.cn/problems/number-of-submatrices-that-sum-to-target/description/">元素和为目标值的子矩阵数量</a></strong></a></li>
        <li><a href="#得分最高的最小轮调httpsleetcodecnproblemssmallest-rotation-with-highest-scoredescription"><strong><a href="https://leetcode.cn/problems/smallest-rotation-with-highest-score/description/">得分最高的最小轮调</a></strong></a></li>
        <li><a href="#k-连续位的最小翻转次数httpsleetcodecnproblemsminimum-number-of-k-consecutive-bit-flipsdescription"><strong><a href="https://leetcode.cn/problems/minimum-number-of-k-consecutive-bit-flips/description/">K 连续位的最小翻转次数</a></strong></a></li>
        <li><a href="#最大化城市的最小电量httpsleetcodecnproblemsmaximize-the-minimum-powered-citydescription"><strong><a href="https://leetcode.cn/problems/maximize-the-minimum-powered-city/description/">最大化城市的最小电量</a></strong></a></li>
        <li><a href="#执行操作使频率分数最大httpsleetcodecnproblemsapply-operations-to-maximize-frequency-scoredescription"><strong><a href="https://leetcode.cn/problems/apply-operations-to-maximize-frequency-score/description/">执行操作使频率分数最大</a></strong></a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        var postToc = $(".post-toc");
        if (postToc.length) {
            var leftPos = $("#main").offset().left;
            if (leftPos < 220) {
                postToc.css({ "width": leftPos - 10, "margin-left": (0 - leftPos) })
            }

            var t = postToc.offset().top - 20,
                a = {
                    start: {
                        position: "absolute",
                        top: t
                    },
                    process: {
                        position: "fixed",
                        top: 20
                    },
                };
            $(window).scroll(function () {
                var e = $(window).scrollTop();
                e < t ? postToc.css(a.start) : postToc.css(a.process)
            })
        }

        if ($("#TableOfContents").children().length < 1) {
            $(".post-toc").remove();
        }
    })
</script>
    <article class="post">
        <header>
            <h1 class="post-title">算法专题|前缀和</h1>
        </header>
        
  <time datetime="2024-01-22T00:00:00Z" class="post-meta meta-date dt-published">
    2024年1月22日
  </time>


<div class="post-meta meta-category">
  <span>&nbsp;|</span>
  
    <a href='/categories/%E7%AE%97%E6%B3%95%E4%B8%93%E9%A2%98' target="_blank">算法专题</a>
  
</div>


        
        
        <div class="clear" style="display: none">
            <div class="toc-article">
                <div class="toc-title">文章目录</div>
            </div>
        </div>
        
        <div class="post-content">
            <p>前缀和可以简单理解为「数列的前 n 项的和」，是一种重要的预处理方式，能大大降低查询的时间复杂度。</p>
<h2 id="初级练习">初级练习</h2>
<h3 id="左右元素和的差值httpsleetcodecnproblemsleft-and-right-sum-differencesdescription"><strong><a href="https://leetcode.cn/problems/left-and-right-sum-differences/description/">左右元素和的差值</a></strong></h3>
<p><strong>思路</strong></p>
<p>思路简单，使用前缀和，不过需要左右两边都计算一下前缀和，然后对每个i的位置进行计算。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">leftRightDifference</span>(nums []<span style="color:#458;font-weight:bold">int</span>) []<span style="color:#458;font-weight:bold">int</span> {
</span></span><span style="display:flex;"><span>	rightSum <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">for</span> _, x <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> nums {
</span></span><span style="display:flex;"><span>		rightSum <span style="color:#000;font-weight:bold">+=</span> x
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	leftSum <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">for</span> i, x <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> nums {
</span></span><span style="display:flex;"><span>		rightSum <span style="color:#000;font-weight:bold">-=</span> x
</span></span><span style="display:flex;"><span>		nums[i] = <span style="color:#900;font-weight:bold">abs</span>(leftSum <span style="color:#000;font-weight:bold">-</span> rightSum)
</span></span><span style="display:flex;"><span>		leftSum <span style="color:#000;font-weight:bold">+=</span> x
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">return</span> nums
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">abs</span>(x <span style="color:#458;font-weight:bold">int</span>) <span style="color:#458;font-weight:bold">int</span> { <span style="color:#000;font-weight:bold">if</span> x &lt; <span style="color:#099">0</span> { <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">-</span>x }; <span style="color:#000;font-weight:bold">return</span> x }
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="所有奇数长度子数组的和httpsleetcodecnproblemssum-of-all-odd-length-subarraysdescription"><strong><a href="https://leetcode.cn/problems/sum-of-all-odd-length-subarrays/description/">所有奇数长度子数组的和</a></strong></h3>
<p><strong>思路</strong></p>
<p>题目有讲到希望能够<code>O(n)</code>时间复杂度完成，这个是从数学角度分析，这个题我们为了学习前缀和就只能在<code>O(n^2)</code>的复杂度下完成了，通过前缀和快速计算。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">sumOddLengthSubarrays</span>(arr []<span style="color:#458;font-weight:bold">int</span>) (sum <span style="color:#458;font-weight:bold">int</span>) {
</span></span><span style="display:flex;"><span>    n <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">len</span>(arr)
</span></span><span style="display:flex;"><span>    prefixSums <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">make</span>([]<span style="color:#458;font-weight:bold">int</span>, n<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> i, v <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> arr {
</span></span><span style="display:flex;"><span>        prefixSums[i<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>] = prefixSums[i] <span style="color:#000;font-weight:bold">+</span> v
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> start <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> arr {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> length <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">1</span>; start<span style="color:#000;font-weight:bold">+</span>length <span style="color:#000;font-weight:bold">&lt;=</span> n; length <span style="color:#000;font-weight:bold">+=</span> <span style="color:#099">2</span> {
</span></span><span style="display:flex;"><span>            end <span style="color:#000;font-weight:bold">:=</span> start <span style="color:#000;font-weight:bold">+</span> length <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>            sum <span style="color:#000;font-weight:bold">+=</span> prefixSums[end<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">-</span> prefixSums[start]
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> sum
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="找到最高海拔httpsleetcodecnproblemsfind-the-highest-altitudedescription"><strong><a href="https://leetcode.cn/problems/find-the-highest-altitude/description/">找到最高海拔</a></strong></h3>
<p><strong>思路</strong></p>
<p>这一题简单，通过基础的前缀和计算每个位置的海拔高度，拿大最大值就是结果了，之所以记录这一题是为了后面的分差数组做准备。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">largestAltitude</span>(gain []<span style="color:#458;font-weight:bold">int</span>) (ans <span style="color:#458;font-weight:bold">int</span>) {
</span></span><span style="display:flex;"><span>    total <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> _, x <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> gain {
</span></span><span style="display:flex;"><span>        total <span style="color:#000;font-weight:bold">+=</span> x
</span></span><span style="display:flex;"><span>        ans = <span style="color:#900;font-weight:bold">max</span>(ans, total)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">max</span>(a, b <span style="color:#458;font-weight:bold">int</span>) <span style="color:#458;font-weight:bold">int</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> b &gt; a {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> b
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> a
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="与车相交的点httpsleetcodecnproblemspoints-that-intersect-with-carsdescription"><strong><a href="https://leetcode.cn/problems/points-that-intersect-with-cars/description/">与车相交的点</a></strong></h3>
<p><strong>思路</strong></p>
<p>很经典的差分数组的使用，将一段范围内的累加转为前后边界的计数，需要掌握这个技巧。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">numberOfPoints</span>(nums [][]<span style="color:#458;font-weight:bold">int</span>) (ans <span style="color:#458;font-weight:bold">int</span>) {
</span></span><span style="display:flex;"><span>	diff <span style="color:#000;font-weight:bold">:=</span> [<span style="color:#099">102</span>]<span style="color:#458;font-weight:bold">int</span>{}
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">for</span> _, p <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> nums {
</span></span><span style="display:flex;"><span>		diff[p[<span style="color:#099">0</span>]]<span style="color:#000;font-weight:bold">++</span>
</span></span><span style="display:flex;"><span>		diff[p[<span style="color:#099">1</span>]<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>]<span style="color:#000;font-weight:bold">--</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	s <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">for</span> _, d <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> diff {
</span></span><span style="display:flex;"><span>		s <span style="color:#000;font-weight:bold">+=</span> d
</span></span><span style="display:flex;"><span>		<span style="color:#000;font-weight:bold">if</span> s &gt; <span style="color:#099">0</span> {
</span></span><span style="display:flex;"><span>			ans<span style="color:#000;font-weight:bold">++</span>
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">return</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="逐步求和得到正数的最小值httpsleetcodecnproblemsminimum-value-to-get-positive-step-by-step-sumdescription"><strong><a href="https://leetcode.cn/problems/minimum-value-to-get-positive-step-by-step-sum/description/">逐步求和得到正数的最小值</a></strong></h3>
<p><strong>思路</strong></p>
<p>这一题通过前缀和计算，需要注意的是累加时拿到最小值，这样才能确保大于1</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">minStartValue</span>(nums []<span style="color:#458;font-weight:bold">int</span>) <span style="color:#458;font-weight:bold">int</span> {
</span></span><span style="display:flex;"><span>    accSum, accSumMin <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">0</span>, <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> _, num <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> nums {
</span></span><span style="display:flex;"><span>        accSum <span style="color:#000;font-weight:bold">+=</span> num
</span></span><span style="display:flex;"><span>        accSumMin = <span style="color:#900;font-weight:bold">min</span>(accSumMin, accSum)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">-</span>accSumMin <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">min</span>(a, b <span style="color:#458;font-weight:bold">int</span>) <span style="color:#458;font-weight:bold">int</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> a &gt; b {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> b
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> a
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="检查是否区域内所有整数都被覆盖httpsleetcodecnproblemscheck-if-all-the-integers-in-a-range-are-covereddescription"><strong><a href="https://leetcode.cn/problems/check-if-all-the-integers-in-a-range-are-covered/description/">检查是否区域内所有整数都被覆盖</a></strong></h3>
<p><strong>思路</strong></p>
<p>还是差分数组，很经典的使用情景。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">isCovered</span>(ranges [][]<span style="color:#458;font-weight:bold">int</span>, left, right <span style="color:#458;font-weight:bold">int</span>) <span style="color:#458;font-weight:bold">bool</span> {
</span></span><span style="display:flex;"><span>    diff <span style="color:#000;font-weight:bold">:=</span> [<span style="color:#099">52</span>]<span style="color:#458;font-weight:bold">int</span>{} <span style="color:#998;font-style:italic">// 差分数组
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">for</span> _, r <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> ranges {
</span></span><span style="display:flex;"><span>        diff[r[<span style="color:#099">0</span>]]<span style="color:#000;font-weight:bold">++</span>
</span></span><span style="display:flex;"><span>        diff[r[<span style="color:#099">1</span>]<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>]<span style="color:#000;font-weight:bold">--</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    cnt <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">0</span> <span style="color:#998;font-style:italic">// 前缀和
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">1</span>; i <span style="color:#000;font-weight:bold">&lt;=</span> <span style="color:#099">50</span>; i<span style="color:#000;font-weight:bold">++</span> {
</span></span><span style="display:flex;"><span>        cnt <span style="color:#000;font-weight:bold">+=</span> diff[i]
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span> cnt <span style="color:#000;font-weight:bold">&lt;=</span> <span style="color:#099">0</span> <span style="color:#000;font-weight:bold">&amp;&amp;</span> left <span style="color:#000;font-weight:bold">&lt;=</span> i <span style="color:#000;font-weight:bold">&amp;&amp;</span> i <span style="color:#000;font-weight:bold">&lt;=</span> right {
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">false</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">true</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="中阶练习">中阶练习</h2>
<h3 id="形成两个异或相等数组的三元组数目httpsleetcodecnproblemscount-triplets-that-can-form-two-arrays-of-equal-xordescription"><strong><a href="https://leetcode.cn/problems/count-triplets-that-can-form-two-arrays-of-equal-xor/description/">形成两个异或相等数组的三元组数目</a></strong></h3>
<p><strong>思路</strong></p>
<p>转换条件，三元组的构建转为判断两个累加值是否相等，相等之间的任何位置都可以构建新的三元组。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">countTriplets</span>(arr []<span style="color:#458;font-weight:bold">int</span>) (ans <span style="color:#458;font-weight:bold">int</span>) {
</span></span><span style="display:flex;"><span>    n <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">len</span>(arr)
</span></span><span style="display:flex;"><span>    s <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">make</span>([]<span style="color:#458;font-weight:bold">int</span>, n<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> i, val <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> arr {
</span></span><span style="display:flex;"><span>        s[i<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>] = s[i] ^ val
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">0</span>; i &lt; n; i<span style="color:#000;font-weight:bold">++</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> k <span style="color:#000;font-weight:bold">:=</span> i <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>; k &lt; n; k<span style="color:#000;font-weight:bold">++</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span> s[i] <span style="color:#000;font-weight:bold">==</span> s[k<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>] {
</span></span><span style="display:flex;"><span>                ans <span style="color:#000;font-weight:bold">+=</span> k <span style="color:#000;font-weight:bold">-</span> i
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="矩阵区域和httpsleetcodecnproblemsmatrix-block-sumdescription"><strong><a href="https://leetcode.cn/problems/matrix-block-sum/description/">矩阵区域和</a></strong></h3>
<p><strong>思路</strong></p>
<p>数组 P 表示数组 mat 的二维前缀和，P 的维数为 <code>(m + 1) * (n + 1)</code>，其中 <code>P[i][j]</code> 表示数组 mat 中以 <code>(0, 0)</code> 为左上角，<code>(i - 1, j - 1)</code> 为右下角的矩形子数组的元素之和。</p>
<p>题目需要对数组 mat 中的每个位置，计算以 <code>(i - K, j - K)</code> 为左上角，<code>(i + K, j + K)</code> 为右下角的矩形子数组的元素之和，我们可以在前缀和数组的帮助下，通过：</p>
<p><code>sum = P[i + K + 1][j + K + 1] - P[i - K][j + K + 1] - P[i + K + 1][j - K] + P[i - K][j - K]</code></p>
<p>需要注意边界情况。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">matrixBlockSum</span>(mat [][]<span style="color:#458;font-weight:bold">int</span>, k <span style="color:#458;font-weight:bold">int</span>) [][]<span style="color:#458;font-weight:bold">int</span> {
</span></span><span style="display:flex;"><span>    m, n <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">len</span>(mat), <span style="color:#0086b3">len</span>(mat[<span style="color:#099">0</span>])
</span></span><span style="display:flex;"><span>    presum <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">make</span>([][]<span style="color:#458;font-weight:bold">int</span>, m <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>    ans <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">make</span>([][]<span style="color:#458;font-weight:bold">int</span>, m)
</span></span><span style="display:flex;"><span>    presum[<span style="color:#099">0</span>] = <span style="color:#0086b3">make</span>([]<span style="color:#458;font-weight:bold">int</span>, n <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">1</span>; i <span style="color:#000;font-weight:bold">&lt;=</span> m; i<span style="color:#000;font-weight:bold">++</span> {
</span></span><span style="display:flex;"><span>        presum[i] = <span style="color:#0086b3">make</span>([]<span style="color:#458;font-weight:bold">int</span>, n <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>        ans[i <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>] = <span style="color:#0086b3">make</span>([]<span style="color:#458;font-weight:bold">int</span>, n)
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> j <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">1</span>; j <span style="color:#000;font-weight:bold">&lt;=</span> n; j<span style="color:#000;font-weight:bold">++</span> {
</span></span><span style="display:flex;"><span>            presum[i][j] = presum[i <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>][j] <span style="color:#000;font-weight:bold">+</span> presum[i][j <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">-</span> presum[i <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>][j <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">+</span> mat[i <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>][j <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>]
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">0</span>; i &lt; m; i<span style="color:#000;font-weight:bold">++</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> j <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">0</span>; j &lt; n; j<span style="color:#000;font-weight:bold">++</span> {
</span></span><span style="display:flex;"><span>            li, lj, ri, rj <span style="color:#000;font-weight:bold">:=</span> <span style="color:#900;font-weight:bold">max</span>(i <span style="color:#000;font-weight:bold">-</span> k, <span style="color:#099">0</span>), <span style="color:#900;font-weight:bold">max</span>(j <span style="color:#000;font-weight:bold">-</span> k, <span style="color:#099">0</span>), <span style="color:#900;font-weight:bold">min</span>(m, i <span style="color:#000;font-weight:bold">+</span> k <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>), <span style="color:#900;font-weight:bold">min</span>(n, j <span style="color:#000;font-weight:bold">+</span> k <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>            ans[i][j] = presum[ri][rj] <span style="color:#000;font-weight:bold">-</span> presum[li][rj] <span style="color:#000;font-weight:bold">-</span> presum[ri][lj] <span style="color:#000;font-weight:bold">+</span> presum[li][lj]
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> ans
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">max</span>(a, b <span style="color:#458;font-weight:bold">int</span>) <span style="color:#458;font-weight:bold">int</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> a &gt; b {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> a
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> b
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">min</span>(a, b <span style="color:#458;font-weight:bold">int</span>) <span style="color:#458;font-weight:bold">int</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> a &lt; b {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> a
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> b
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="有序数组中差绝对值之和httpsleetcodecnproblemssum-of-absolute-differences-in-a-sorted-arraydescription"><strong><a href="https://leetcode.cn/problems/sum-of-absolute-differences-in-a-sorted-array/description/">有序数组中差绝对值之和</a></strong></h3>
<p><strong>思路</strong></p>
<p>首先肯定学会暴力的写法，这题两个循环暴力解题，那如何优化，我们思考计算完第i个位置的情况后，移动到i+1位置，计算量上有什么变化，应该是后面的部分都少了i+1与i的差值，前面部分多了差值，这个思路有待验证。</p>
<p>题解很多是通过前缀和数组，每次独立计算。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Solution</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">int</span><span style="color:#000;font-weight:bold">[]</span> <span style="color:#900;font-weight:bold">getSumAbsoluteDifferences</span><span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span><span style="color:#000;font-weight:bold">[]</span> nums<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#458;font-weight:bold">int</span> sum <span style="color:#000;font-weight:bold">=</span> 0<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#458;font-weight:bold">int</span><span style="color:#000;font-weight:bold">[]</span> prefixSum <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> <span style="color:#458;font-weight:bold">int</span><span style="color:#000;font-weight:bold">[</span>nums<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">length</span><span style="color:#000;font-weight:bold">];</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//计算前缀和
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#000;font-weight:bold">for</span><span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span> i<span style="color:#000;font-weight:bold">=</span>0<span style="color:#000;font-weight:bold">;</span>i<span style="color:#000;font-weight:bold">&lt;</span>nums<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">length</span><span style="color:#000;font-weight:bold">;</span>i<span style="color:#000;font-weight:bold">++){</span>
</span></span><span style="display:flex;"><span>            sum <span style="color:#000;font-weight:bold">+=</span> nums<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">];</span>
</span></span><span style="display:flex;"><span>            prefixSum<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">=</span> sum<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//计算每个数的差绝对值之和
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#458;font-weight:bold">int</span><span style="color:#000;font-weight:bold">[]</span> output <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> <span style="color:#458;font-weight:bold">int</span><span style="color:#000;font-weight:bold">[</span>nums<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">length</span><span style="color:#000;font-weight:bold">];</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span><span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span> i<span style="color:#000;font-weight:bold">=</span>0<span style="color:#000;font-weight:bold">;</span>i<span style="color:#000;font-weight:bold">&lt;</span>nums<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">length</span><span style="color:#000;font-weight:bold">;</span>i<span style="color:#000;font-weight:bold">++){</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">// int sumOfLeftDifferences = (i+1)*nums[i]-prefixSum[i]; 
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            <span style="color:#998;font-style:italic">// int sumOfRightDifferences = prefixSum[nums.length-1]-prefixSum[i]-nums[i]*(nums.length-1-i);
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            <span style="color:#998;font-style:italic">// sumOfDifferences =  sumOfLeftDifferences+sumOfRightDifferences;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            output<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">(</span>i<span style="color:#000;font-weight:bold">+</span>1<span style="color:#000;font-weight:bold">)*</span>nums<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]-</span>prefixSum<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]+</span> prefixSum<span style="color:#000;font-weight:bold">[</span>nums<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">length</span><span style="color:#000;font-weight:bold">-</span>1<span style="color:#000;font-weight:bold">]-</span>prefixSum<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]-</span>nums<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]*(</span>nums<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">length</span><span style="color:#000;font-weight:bold">-</span>1<span style="color:#000;font-weight:bold">-</span>i<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> output<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="商店的最少代价httpsleetcodecnproblemsminimum-penalty-for-a-shopdescription"><strong><a href="https://leetcode.cn/problems/minimum-penalty-for-a-shop/description/">商店的最少代价</a></strong></h3>
<p><strong>思路</strong></p>
<p>对于每个选定的关门事件，前面的N记代价后面的Y记录代价。因为字符串中只有N和Y两个，因此我们统计N的个数就可以知道Y的个数，这样就能计算每个位置的代价，取最小值。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">bestClosingTime</span>(customers <span style="color:#458;font-weight:bold">string</span>) (ans <span style="color:#458;font-weight:bold">int</span>) {
</span></span><span style="display:flex;"><span>	cost <span style="color:#000;font-weight:bold">:=</span> strings.<span style="color:#900;font-weight:bold">Count</span>(customers, <span style="color:#d14">&#34;Y&#34;</span>)
</span></span><span style="display:flex;"><span>	minCost <span style="color:#000;font-weight:bold">:=</span> cost
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">for</span> i, c <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> customers {
</span></span><span style="display:flex;"><span>		<span style="color:#000;font-weight:bold">if</span> c <span style="color:#000;font-weight:bold">==</span> <span style="color:#d14">&#39;N&#39;</span> {
</span></span><span style="display:flex;"><span>			cost<span style="color:#000;font-weight:bold">++</span>
</span></span><span style="display:flex;"><span>		} <span style="color:#000;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>			cost<span style="color:#000;font-weight:bold">--</span>
</span></span><span style="display:flex;"><span>			<span style="color:#000;font-weight:bold">if</span> cost &lt; minCost {
</span></span><span style="display:flex;"><span>				cost = minCost
</span></span><span style="display:flex;"><span>				ans = i <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">return</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="最大平均值和的分组httpsleetcodecnproblemslargest-sum-of-averagesdescription"><strong><a href="https://leetcode.cn/problems/largest-sum-of-averages/description/">最大平均值和的分组</a></strong></h3>
<p><strong>思路</strong></p>
<p>动态规划结合前缀和的解法。</p>
<p><code>dp[i][j]</code> 表示 <code>nums</code> 在区间 <code>[0,i−1]</code>被切分成 j 个子数组的最大平均值和，显然 <code>i≥j</code>，计算分两种情况讨论：</p>
<p>当 <code>j=1</code> 时，<code>dp[i][j]</code>是对应区间 <code>[0,i−1]</code>的平均值；</p>
<p>当 <code>j&gt;1</code>时，我们将可以将区间 <code>[0,i−1]</code>分成 <code>[0,x−1]</code> 和 <code>[x,i−1]</code> 两个部分，其中 <code>x≥j−1</code>，那么 <code>dp[i][j]</code>等于所有这些合法的切分方式的平均值和的最大值。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">largestSumOfAverages</span>(nums []<span style="color:#458;font-weight:bold">int</span>, k <span style="color:#458;font-weight:bold">int</span>) <span style="color:#458;font-weight:bold">float64</span> {
</span></span><span style="display:flex;"><span>    n <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">len</span>(nums)
</span></span><span style="display:flex;"><span>    prefix <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">make</span>([]<span style="color:#458;font-weight:bold">float64</span>, n<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> i, x <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> nums {
</span></span><span style="display:flex;"><span>        prefix[i<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>] = prefix[i] <span style="color:#000;font-weight:bold">+</span> <span style="color:#0086b3">float64</span>(x)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    dp <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">make</span>([][]<span style="color:#458;font-weight:bold">float64</span>, n<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> dp {
</span></span><span style="display:flex;"><span>        dp[i] = <span style="color:#0086b3">make</span>([]<span style="color:#458;font-weight:bold">float64</span>, k<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">1</span>; i <span style="color:#000;font-weight:bold">&lt;=</span> n; i<span style="color:#000;font-weight:bold">++</span> {
</span></span><span style="display:flex;"><span>        dp[i][<span style="color:#099">1</span>] = prefix[i] <span style="color:#000;font-weight:bold">/</span> <span style="color:#0086b3">float64</span>(i)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> j <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">2</span>; j <span style="color:#000;font-weight:bold">&lt;=</span> k; j<span style="color:#000;font-weight:bold">++</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">:=</span> j; i <span style="color:#000;font-weight:bold">&lt;=</span> n; i<span style="color:#000;font-weight:bold">++</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">for</span> x <span style="color:#000;font-weight:bold">:=</span> j <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>; x &lt; i; x<span style="color:#000;font-weight:bold">++</span> {
</span></span><span style="display:flex;"><span>                dp[i][j] = math.<span style="color:#900;font-weight:bold">Max</span>(dp[i][j], dp[x][j<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>]<span style="color:#000;font-weight:bold">+</span>(prefix[i]<span style="color:#000;font-weight:bold">-</span>prefix[x])<span style="color:#000;font-weight:bold">/</span><span style="color:#0086b3">float64</span>(i<span style="color:#000;font-weight:bold">-</span>x))
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> dp[n][k]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="子矩阵元素加-1httpsleetcodecnproblemsincrement-submatrices-by-onedescription"><strong><a href="https://leetcode.cn/problems/increment-submatrices-by-one/description/">子矩阵元素加 1</a></strong></h3>
<p><strong>思路</strong></p>
<p>二维差分数组，学习一下。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">rangeAddQueries</span>(n <span style="color:#458;font-weight:bold">int</span>, queries [][]<span style="color:#458;font-weight:bold">int</span>) [][]<span style="color:#458;font-weight:bold">int</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#998;font-style:italic">// 二维差分模板
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>	diff <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">make</span>([][]<span style="color:#458;font-weight:bold">int</span>, n<span style="color:#000;font-weight:bold">+</span><span style="color:#099">2</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> diff {
</span></span><span style="display:flex;"><span>		diff[i] = <span style="color:#0086b3">make</span>([]<span style="color:#458;font-weight:bold">int</span>, n<span style="color:#000;font-weight:bold">+</span><span style="color:#099">2</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	update <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">func</span>(r1, c1, r2, c2, x <span style="color:#458;font-weight:bold">int</span>) {
</span></span><span style="display:flex;"><span>		diff[r1<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>][c1<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">+=</span> x
</span></span><span style="display:flex;"><span>		diff[r1<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>][c2<span style="color:#000;font-weight:bold">+</span><span style="color:#099">2</span>] <span style="color:#000;font-weight:bold">-=</span> x
</span></span><span style="display:flex;"><span>		diff[r2<span style="color:#000;font-weight:bold">+</span><span style="color:#099">2</span>][c1<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">-=</span> x
</span></span><span style="display:flex;"><span>		diff[r2<span style="color:#000;font-weight:bold">+</span><span style="color:#099">2</span>][c2<span style="color:#000;font-weight:bold">+</span><span style="color:#099">2</span>] <span style="color:#000;font-weight:bold">+=</span> x
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">for</span> _, q <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> queries {
</span></span><span style="display:flex;"><span>		<span style="color:#900;font-weight:bold">update</span>(q[<span style="color:#099">0</span>], q[<span style="color:#099">1</span>], q[<span style="color:#099">2</span>], q[<span style="color:#099">3</span>], <span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#998;font-style:italic">// 用二维前缀和复原（原地修改）
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>	<span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">1</span>; i <span style="color:#000;font-weight:bold">&lt;=</span> n; i<span style="color:#000;font-weight:bold">++</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#000;font-weight:bold">for</span> j <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">1</span>; j <span style="color:#000;font-weight:bold">&lt;=</span> n; j<span style="color:#000;font-weight:bold">++</span> {
</span></span><span style="display:flex;"><span>			diff[i][j] <span style="color:#000;font-weight:bold">+=</span> diff[i][j<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">+</span> diff[i<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>][j] <span style="color:#000;font-weight:bold">-</span> diff[i<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>][j<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>]
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#998;font-style:italic">// 保留中间 n*n 的部分，即为答案
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>	diff = diff[<span style="color:#099">1</span> : n<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>]
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">for</span> i, row <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> diff {
</span></span><span style="display:flex;"><span>		diff[i] = row[<span style="color:#099">1</span> : n<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>]
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">return</span> diff
</span></span><span style="display:flex;"><span>}   
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="每个元音包含偶数次的最长子字符串httpsleetcodecnproblemsfind-the-longest-substring-containing-vowels-in-even-countsdescription"><strong><a href="https://leetcode.cn/problems/find-the-longest-substring-containing-vowels-in-even-counts/description/">每个元音包含偶数次的最长子字符串</a></strong></h3>
<p><strong>思路</strong></p>
<p>由于题目中只要求偶数，因此我们只需要记录奇偶性，针对单个字符&rsquo;a&rsquo;为例，记录每个位置的累加的奇偶，这样通过hash就可快速判断最长的长度，这里hash需要记录最开始的位置。此外题目还需要判断5个元音字母，因此我们通过bit来压缩状态。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">findTheLongestSubstring</span>(s <span style="color:#458;font-weight:bold">string</span>) <span style="color:#458;font-weight:bold">int</span> {
</span></span><span style="display:flex;"><span>    ans, status <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">0</span>, <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>    pos <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">make</span>([]<span style="color:#458;font-weight:bold">int</span>, <span style="color:#099">1</span> <span style="color:#000;font-weight:bold">&lt;&lt;</span> <span style="color:#099">5</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">0</span>; i &lt; <span style="color:#0086b3">len</span>(pos); i<span style="color:#000;font-weight:bold">++</span> {
</span></span><span style="display:flex;"><span>        pos[i] = <span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    pos[<span style="color:#099">0</span>] = <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">0</span>; i &lt; <span style="color:#0086b3">len</span>(s); i<span style="color:#000;font-weight:bold">++</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">switch</span> s[i] {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">case</span> <span style="color:#d14">&#39;a&#39;</span>:
</span></span><span style="display:flex;"><span>            status ^= <span style="color:#099">1</span> <span style="color:#000;font-weight:bold">&lt;&lt;</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">case</span> <span style="color:#d14">&#39;e&#39;</span>:
</span></span><span style="display:flex;"><span>            status ^= <span style="color:#099">1</span> <span style="color:#000;font-weight:bold">&lt;&lt;</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">case</span> <span style="color:#d14">&#39;i&#39;</span>:
</span></span><span style="display:flex;"><span>            status ^= <span style="color:#099">1</span> <span style="color:#000;font-weight:bold">&lt;&lt;</span> <span style="color:#099">2</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">case</span> <span style="color:#d14">&#39;o&#39;</span>:
</span></span><span style="display:flex;"><span>            status ^= <span style="color:#099">1</span> <span style="color:#000;font-weight:bold">&lt;&lt;</span> <span style="color:#099">3</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">case</span> <span style="color:#d14">&#39;u&#39;</span>:
</span></span><span style="display:flex;"><span>            status ^= <span style="color:#099">1</span> <span style="color:#000;font-weight:bold">&lt;&lt;</span> <span style="color:#099">4</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span> pos[status] <span style="color:#000;font-weight:bold">&gt;=</span> <span style="color:#099">0</span> {
</span></span><span style="display:flex;"><span>            ans = <span style="color:#900;font-weight:bold">Max</span>(ans, i <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span> <span style="color:#000;font-weight:bold">-</span> pos[status])
</span></span><span style="display:flex;"><span>        } <span style="color:#000;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            pos[status] = i <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> ans
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">Max</span>(x, y <span style="color:#458;font-weight:bold">int</span>) <span style="color:#458;font-weight:bold">int</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> x &gt; y {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> x
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> y
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="连续数组httpsleetcodecnproblemscontiguous-arraydescription"><strong><a href="https://leetcode.cn/problems/contiguous-array/description/">连续数组</a></strong></h3>
<p><strong>思路</strong></p>
<p>前缀和加 hash，经典组合，需要学习这个技巧 。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">findMaxLength</span>(nums []<span style="color:#458;font-weight:bold">int</span>) (maxLength <span style="color:#458;font-weight:bold">int</span>) {
</span></span><span style="display:flex;"><span>    mp <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">map</span>[<span style="color:#458;font-weight:bold">int</span>]<span style="color:#458;font-weight:bold">int</span>{<span style="color:#099">0</span>: <span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>}
</span></span><span style="display:flex;"><span>    counter <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> i, num <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> nums {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span> num <span style="color:#000;font-weight:bold">==</span> <span style="color:#099">1</span> {
</span></span><span style="display:flex;"><span>            counter<span style="color:#000;font-weight:bold">++</span>
</span></span><span style="display:flex;"><span>        } <span style="color:#000;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            counter<span style="color:#000;font-weight:bold">--</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span> prevIndex, has <span style="color:#000;font-weight:bold">:=</span> mp[counter]; has {
</span></span><span style="display:flex;"><span>            maxLength = <span style="color:#900;font-weight:bold">max</span>(maxLength, i<span style="color:#000;font-weight:bold">-</span>prevIndex)
</span></span><span style="display:flex;"><span>        } <span style="color:#000;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            mp[counter] = i
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">max</span>(a, b <span style="color:#458;font-weight:bold">int</span>) <span style="color:#458;font-weight:bold">int</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> a &gt; b {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> a
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> b
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="选择建筑的方案数httpsleetcodecnproblemsnumber-of-ways-to-select-buildingsdescription"><strong><a href="https://leetcode.cn/problems/number-of-ways-to-select-buildings/description/">选择建筑的方案数</a></strong></h3>
<p><strong>思路</strong></p>
<p>由于选取的个数规定是3，因此只有<code>011</code>和<code>101</code>符合要求，那么每一种情况怎么计算呢？我们通过固定中间位置，统计两边的个数来确定方案数。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Solution</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">def</span> <span style="color:#900;font-weight:bold">numberOfWays</span>(<span style="color:#999">self</span>, s: <span style="color:#0086b3">str</span>) <span style="color:#000;font-weight:bold">-&gt;</span> <span style="color:#0086b3">int</span>:
</span></span><span style="display:flex;"><span>        n <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">len</span>(s)
</span></span><span style="display:flex;"><span>        n1 <span style="color:#000;font-weight:bold">=</span> s<span style="color:#000;font-weight:bold">.</span>count(<span style="color:#d14">&#39;1&#39;</span>)   <span style="color:#998;font-style:italic"># s 中 &#39;1&#39; 的个数</span>
</span></span><span style="display:flex;"><span>        res <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>   <span style="color:#998;font-style:italic"># 两种子序列的个数总和</span>
</span></span><span style="display:flex;"><span>        cnt <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>   <span style="color:#998;font-style:italic"># 遍历到目前为止 &#39;1&#39; 的个数</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(n):
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span> s[i] <span style="color:#000;font-weight:bold">==</span> <span style="color:#d14">&#39;1&#39;</span>:
</span></span><span style="display:flex;"><span>                res <span style="color:#000;font-weight:bold">+=</span> (i <span style="color:#000;font-weight:bold">-</span> cnt) <span style="color:#000;font-weight:bold">*</span> (n <span style="color:#000;font-weight:bold">-</span> n1 <span style="color:#000;font-weight:bold">-</span> i <span style="color:#000;font-weight:bold">+</span> cnt)
</span></span><span style="display:flex;"><span>                cnt <span style="color:#000;font-weight:bold">+=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">else</span>:
</span></span><span style="display:flex;"><span>                res <span style="color:#000;font-weight:bold">+=</span> cnt <span style="color:#000;font-weight:bold">*</span> (n1 <span style="color:#000;font-weight:bold">-</span> cnt)
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> res
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="长度为-3-的不同回文子序列httpsleetcodecnproblemsunique-length-3-palindromic-subsequencesdescription"><strong><a href="https://leetcode.cn/problems/unique-length-3-palindromic-subsequences/description/">长度为 3 的不同回文子序列</a></strong></h3>
<p><strong>思路</strong></p>
<p>这题容易想到通过例举每个中间位置，看两边相同字符的个数得到数量，统计每个位置作为中间位置的结果之和就是答案，那如何记录两边有相同的字符，这里用了bit的压缩，用int的32位中的26为记录是否存在对应字母。更为巧妙的是通过前缀和的方式统计的压缩状态同时记录了个数，因此可以快速计算，这个思路很巧妙。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>class Solution:
</span></span><span style="display:flex;"><span>    def <span style="color:#900;font-weight:bold">countPalindromicSubsequence</span>(self, s: str) <span style="color:#000;font-weight:bold">-</span>&gt; <span style="color:#458;font-weight:bold">int</span>:
</span></span><span style="display:flex;"><span>        n = <span style="color:#0086b3">len</span>(s)
</span></span><span style="display:flex;"><span>        res = <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a61717;background-color:#e3d2d2">#</span> 前缀<span style="color:#000;font-weight:bold">/</span>后缀字符状态数组
</span></span><span style="display:flex;"><span>        pre = [<span style="color:#099">0</span>] <span style="color:#000;font-weight:bold">*</span> n
</span></span><span style="display:flex;"><span>        suf = [<span style="color:#099">0</span>] <span style="color:#000;font-weight:bold">*</span> n
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> i in <span style="color:#000;font-weight:bold">range</span>(n):
</span></span><span style="display:flex;"><span>            <span style="color:#a61717;background-color:#e3d2d2">#</span> 前缀 s[<span style="color:#099">0.</span>.i<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>] 包含的字符种类
</span></span><span style="display:flex;"><span>            pre[i] = (pre[i<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">if</span> i <span style="color:#000;font-weight:bold">else</span> <span style="color:#099">0</span>) | (<span style="color:#099">1</span> <span style="color:#000;font-weight:bold">&lt;&lt;</span> (<span style="color:#900;font-weight:bold">ord</span>(s[i]) <span style="color:#000;font-weight:bold">-</span> <span style="color:#900;font-weight:bold">ord</span>(<span style="color:#d14">&#39;a&#39;</span>)))
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> i in <span style="color:#000;font-weight:bold">range</span>(n <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>, <span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>, <span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>):
</span></span><span style="display:flex;"><span>            <span style="color:#a61717;background-color:#e3d2d2">#</span> 后缀 s[i<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1.</span>.n<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>] 包含的字符种类
</span></span><span style="display:flex;"><span>            suf[i] = (suf[i<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">if</span> i <span style="color:#000;font-weight:bold">!=</span> n <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span> <span style="color:#000;font-weight:bold">else</span> <span style="color:#099">0</span>) | (<span style="color:#099">1</span> <span style="color:#000;font-weight:bold">&lt;&lt;</span> (<span style="color:#900;font-weight:bold">ord</span>(s[i]) <span style="color:#000;font-weight:bold">-</span> <span style="color:#900;font-weight:bold">ord</span>(<span style="color:#d14">&#39;a&#39;</span>)))
</span></span><span style="display:flex;"><span>        <span style="color:#a61717;background-color:#e3d2d2">#</span> 每种中间字符的回文子序列状态数组
</span></span><span style="display:flex;"><span>        ans = [<span style="color:#099">0</span>] <span style="color:#000;font-weight:bold">*</span> <span style="color:#099">26</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> i in <span style="color:#000;font-weight:bold">range</span>(<span style="color:#099">1</span>, n <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>):
</span></span><span style="display:flex;"><span>            ans[<span style="color:#900;font-weight:bold">ord</span>(s[i])<span style="color:#000;font-weight:bold">-</span><span style="color:#900;font-weight:bold">ord</span>(<span style="color:#d14">&#39;a&#39;</span>)] <span style="color:#000;font-weight:bold">|=</span> pre[i<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">&amp;</span> suf[i<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>]
</span></span><span style="display:flex;"><span>        <span style="color:#a61717;background-color:#e3d2d2">#</span> 更新答案
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> i in <span style="color:#000;font-weight:bold">range</span>(<span style="color:#099">26</span>):
</span></span><span style="display:flex;"><span>            res <span style="color:#000;font-weight:bold">+=</span> <span style="color:#900;font-weight:bold">bin</span>(ans[i]).<span style="color:#900;font-weight:bold">count</span>(<span style="color:#d14">&#34;1&#34;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> res
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="矩阵中最大的三个菱形和httpsleetcodecnproblemsget-biggest-three-rhombus-sums-in-a-griddescription"><strong><a href="https://leetcode.cn/problems/get-biggest-three-rhombus-sums-in-a-grid/description/">矩阵中最大的三个菱形和</a></strong></h3>
<p><strong>思路</strong></p>
<p>这一题给了一个提示，一个菱形的自由度是多少？也就是说至少知道那些变量就可以确定一个菱形，答案是3，即知道最下面的点和正菱形的宽度就行了，为什么选最下面的点，因为这样就可以使用前缀和来计算了，通过三个for循环遍历菱形，计算数值，然后返回最大的三个。注意单个点也算菱形。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>class Answer:
</span></span><span style="display:flex;"><span>    def <span style="color:#900;font-weight:bold">__init__</span>(self):
</span></span><span style="display:flex;"><span>        self.ans = [<span style="color:#099">0</span>, <span style="color:#099">0</span>, <span style="color:#099">0</span>]
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    def <span style="color:#900;font-weight:bold">put</span>(self, x: <span style="color:#458;font-weight:bold">int</span>):
</span></span><span style="display:flex;"><span>        _ans = self.ans
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span> x &gt; _ans[<span style="color:#099">0</span>]:
</span></span><span style="display:flex;"><span>            _ans[<span style="color:#099">0</span>], _ans[<span style="color:#099">1</span>], _ans[<span style="color:#099">2</span>] = x, _ans[<span style="color:#099">0</span>], _ans[<span style="color:#099">1</span>]
</span></span><span style="display:flex;"><span>        elif x <span style="color:#000;font-weight:bold">!=</span> _ans[<span style="color:#099">0</span>] and x &gt; _ans[<span style="color:#099">1</span>]:
</span></span><span style="display:flex;"><span>            _ans[<span style="color:#099">1</span>], _ans[<span style="color:#099">2</span>] = x, _ans[<span style="color:#099">1</span>]
</span></span><span style="display:flex;"><span>        elif x <span style="color:#000;font-weight:bold">!=</span> _ans[<span style="color:#099">0</span>] and x <span style="color:#000;font-weight:bold">!=</span> _ans[<span style="color:#099">1</span>] and x &gt; _ans[<span style="color:#099">2</span>]:
</span></span><span style="display:flex;"><span>            _ans[<span style="color:#099">2</span>] = x
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    def <span style="color:#900;font-weight:bold">get</span>(self) <span style="color:#000;font-weight:bold">-</span>&gt; List[<span style="color:#458;font-weight:bold">int</span>]:
</span></span><span style="display:flex;"><span>        _ans = self.ans
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> [num <span style="color:#000;font-weight:bold">for</span> num in _ans <span style="color:#000;font-weight:bold">if</span> num <span style="color:#000;font-weight:bold">!=</span> <span style="color:#099">0</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>class Solution:
</span></span><span style="display:flex;"><span>    def <span style="color:#900;font-weight:bold">getBiggestThree</span>(self, grid: List[List[<span style="color:#458;font-weight:bold">int</span>]]) <span style="color:#000;font-weight:bold">-</span>&gt; List[<span style="color:#458;font-weight:bold">int</span>]:
</span></span><span style="display:flex;"><span>        m, n = <span style="color:#0086b3">len</span>(grid), <span style="color:#0086b3">len</span>(grid[<span style="color:#099">0</span>])
</span></span><span style="display:flex;"><span>        sum1 = [[<span style="color:#099">0</span>] <span style="color:#000;font-weight:bold">*</span> (n <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">2</span>) <span style="color:#000;font-weight:bold">for</span> _ in <span style="color:#000;font-weight:bold">range</span>(m <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>)]
</span></span><span style="display:flex;"><span>        sum2 = [[<span style="color:#099">0</span>] <span style="color:#000;font-weight:bold">*</span> (n <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">2</span>) <span style="color:#000;font-weight:bold">for</span> _ in <span style="color:#000;font-weight:bold">range</span>(m <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>)]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> i in <span style="color:#000;font-weight:bold">range</span>(<span style="color:#099">1</span>, m <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>):
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">for</span> j in <span style="color:#000;font-weight:bold">range</span>(<span style="color:#099">1</span>, n <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>):
</span></span><span style="display:flex;"><span>                sum1[i][j] = sum1[i <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>][j <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">+</span> grid[i <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>][j <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>]
</span></span><span style="display:flex;"><span>                sum2[i][j] = sum2[i <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>][j <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">+</span> grid[i <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>][j <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>]
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        ans = <span style="color:#900;font-weight:bold">Answer</span>()
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> i in <span style="color:#000;font-weight:bold">range</span>(m):
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">for</span> j in <span style="color:#000;font-weight:bold">range</span>(n):
</span></span><span style="display:flex;"><span>                <span style="color:#a61717;background-color:#e3d2d2">#</span> 单独的一个格子也是菱形
</span></span><span style="display:flex;"><span>                ans.<span style="color:#900;font-weight:bold">put</span>(grid[i][j])
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">for</span> k in <span style="color:#000;font-weight:bold">range</span>(i <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">2</span>, m, <span style="color:#099">2</span>):
</span></span><span style="display:flex;"><span>                    ux, uy = i, j
</span></span><span style="display:flex;"><span>                    dx, dy = k, j
</span></span><span style="display:flex;"><span>                    lx, ly = (i <span style="color:#000;font-weight:bold">+</span> k) <span style="color:#998;font-style:italic">// 2, j - (k - i) // 2
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>                    rx, ry = (i <span style="color:#000;font-weight:bold">+</span> k) <span style="color:#998;font-style:italic">// 2, j + (k - i) // 2
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>                    
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">if</span> ly &lt; <span style="color:#099">0</span> or ry <span style="color:#000;font-weight:bold">&gt;=</span> n:
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">break</span>
</span></span><span style="display:flex;"><span>                    
</span></span><span style="display:flex;"><span>                    ans.<span style="color:#900;font-weight:bold">put</span>(
</span></span><span style="display:flex;"><span>                        (sum2[lx <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>][ly <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">-</span> sum2[ux][uy <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">2</span>]) <span style="color:#000;font-weight:bold">+</span>
</span></span><span style="display:flex;"><span>                        (sum1[rx <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>][ry <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">-</span> sum1[ux][uy]) <span style="color:#000;font-weight:bold">+</span>
</span></span><span style="display:flex;"><span>                        (sum1[dx <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>][dy <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">-</span> sum1[lx][ly]) <span style="color:#000;font-weight:bold">+</span>
</span></span><span style="display:flex;"><span>                        (sum2[dx <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>][dy <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">-</span> sum2[rx][ry <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">2</span>]) <span style="color:#000;font-weight:bold">-</span>
</span></span><span style="display:flex;"><span>                        (grid[ux][uy] <span style="color:#000;font-weight:bold">+</span> grid[dx][dy] <span style="color:#000;font-weight:bold">+</span> grid[lx][ly] <span style="color:#000;font-weight:bold">+</span> grid[rx][ry])
</span></span><span style="display:flex;"><span>                    )
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> ans.<span style="color:#900;font-weight:bold">get</span>()
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="长度最小的子数组httpsleetcodecnproblemsminimum-size-subarray-sumdescription"><strong><a href="https://leetcode.cn/problems/minimum-size-subarray-sum/description/">长度最小的子数组</a></strong></h3>
<p><strong>思路</strong></p>
<p>这题用滑动窗口做是很经典的方法，不过我们目的是练习前缀和，因此考虑使用前缀和来解题。我们计划使用前缀和+二分查找来解题，由于道题保证了数组中每个元素都为正，所以前缀和一定是递增的，这一点保证了二分的正确性。如果题目没有说明数组中每个元素都为正，这里就不能使用二分来查找这个位置了。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">minSubArrayLen</span>(s <span style="color:#458;font-weight:bold">int</span>, nums []<span style="color:#458;font-weight:bold">int</span>) <span style="color:#458;font-weight:bold">int</span> {
</span></span><span style="display:flex;"><span>    n <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">len</span>(nums)
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> n <span style="color:#000;font-weight:bold">==</span> <span style="color:#099">0</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ans <span style="color:#000;font-weight:bold">:=</span> math.MaxInt32
</span></span><span style="display:flex;"><span>    sums <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">make</span>([]<span style="color:#458;font-weight:bold">int</span>, n <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">// 为了方便计算，令 size = n + 1 
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#998;font-style:italic">// sums[0] = 0 意味着前 0 个元素的前缀和为 0
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#998;font-style:italic">// sums[1] = A[0] 前 1 个元素的前缀和为 A[0]
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#998;font-style:italic">// 以此类推
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">1</span>; i <span style="color:#000;font-weight:bold">&lt;=</span> n; i<span style="color:#000;font-weight:bold">++</span> {
</span></span><span style="display:flex;"><span>        sums[i] = sums[i <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">+</span> nums[i <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">1</span>; i <span style="color:#000;font-weight:bold">&lt;=</span> n; i<span style="color:#000;font-weight:bold">++</span> {
</span></span><span style="display:flex;"><span>        target <span style="color:#000;font-weight:bold">:=</span> s <span style="color:#000;font-weight:bold">+</span> sums[i<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>]
</span></span><span style="display:flex;"><span>        bound <span style="color:#000;font-weight:bold">:=</span> sort.<span style="color:#900;font-weight:bold">SearchInts</span>(sums, target)
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span> bound &lt; <span style="color:#099">0</span> {
</span></span><span style="display:flex;"><span>            bound = <span style="color:#000;font-weight:bold">-</span>bound <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span> bound <span style="color:#000;font-weight:bold">&lt;=</span> n {
</span></span><span style="display:flex;"><span>            ans = <span style="color:#900;font-weight:bold">min</span>(ans, bound <span style="color:#000;font-weight:bold">-</span> (i <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>))
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> ans <span style="color:#000;font-weight:bold">==</span> math.MaxInt32 {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> ans
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">min</span>(x, y <span style="color:#458;font-weight:bold">int</span>) <span style="color:#458;font-weight:bold">int</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> x &lt; y {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> x
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> y
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="最美子字符串的数目httpsleetcodecnproblemsnumber-of-wonderful-substringsdescription"><strong><a href="https://leetcode.cn/problems/number-of-wonderful-substrings/description/">最美子字符串的数目</a></strong></h3>
<p><strong>思路</strong></p>
<p>代码很简单，但使用的方法包含了前缀和+bits压缩+hash计数。</p>
<p>由于我们只关心每个字母出现次数的奇偶性，因此可以将「字母出现次数」转换成「字母出现次数的奇偶性」，这可以用一个长为 101010 的二进制串表示，二进制串的第 iii 位为 000 表示第 iii 个小写字母出现了偶数次，为 111 表示第 iii 个小写字母出现了奇数次。</p>
<p>考虑字母出现次数的前缀和，由于只考虑奇偶性，我们也可以将其视作一个长为 101010 的二进制串。此时计算前缀和由加法运算改为异或运算，这是因为异或运算的本质是在模 222 剩余系中进行加法运算，刚好对应奇偶性的变化。</p>
<p>若有两个不同下标的前缀和相同，则这两个前缀和的异或结果为 000，意味着这段子串的各个字母的个数均为偶数，符合题目要求。因此，我们可以在求前缀和的同时，用一个长为 1024 的 cnt 数组统计每个前缀和二进制串出现的次数，从而得到相同前缀和的对数，即各个字母的个数均为偶数的子串个数。</p>
<p>题目还允许有一个字母出现奇数次，这需要我们寻找两个前缀和，其异或结果的二进制数中恰好有一个 111，意味着这段子串的各个字母的个数仅有一个为奇数。对此我们可以枚举当前前缀和的每个比特，将其反转，然后去 cnt 中查找该前缀和的出现次数。</p>
<p>将所有统计到的次数累加即为答案。时间复杂度为O(10⋅n)，nnn 为字符串 word 的长度。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">wonderfulSubstrings</span>(word <span style="color:#458;font-weight:bold">string</span>) (ans <span style="color:#458;font-weight:bold">int64</span>) {
</span></span><span style="display:flex;"><span>	cnt <span style="color:#000;font-weight:bold">:=</span> [<span style="color:#099">1024</span>]<span style="color:#458;font-weight:bold">int</span>{<span style="color:#099">1</span>} <span style="color:#998;font-style:italic">// 初始前缀和为 0，需将其计入出现次数
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>	sum <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">for</span> _, c <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> word {
</span></span><span style="display:flex;"><span>		sum ^= <span style="color:#099">1</span> <span style="color:#000;font-weight:bold">&lt;&lt;</span> (c <span style="color:#000;font-weight:bold">-</span> <span style="color:#d14">&#39;a&#39;</span>) <span style="color:#998;font-style:italic">// 计算当前前缀和
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		ans <span style="color:#000;font-weight:bold">+=</span> <span style="color:#0086b3">int64</span>(cnt[sum]) <span style="color:#998;font-style:italic">// 所有字母均出现偶数次
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		<span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">1</span>; i &lt; <span style="color:#099">1024</span>; i <span style="color:#000;font-weight:bold">&lt;&lt;=</span> <span style="color:#099">1</span> { <span style="color:#998;font-style:italic">// 枚举其中一个字母出现奇数次
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>			ans <span style="color:#000;font-weight:bold">+=</span> <span style="color:#0086b3">int64</span>(cnt[sum^i]) <span style="color:#998;font-style:italic">// 反转该字母的出现次数的奇偶性
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		}
</span></span><span style="display:flex;"><span>		cnt[sum]<span style="color:#000;font-weight:bold">++</span> <span style="color:#998;font-style:italic">// 更新前缀和出现次数
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">return</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="蜡烛之间的盘子httpsleetcodecnproblemsplates-between-candlesdescription"><strong><a href="https://leetcode.cn/problems/plates-between-candles/description/">蜡烛之间的盘子</a></strong></h3>
<p><strong>思路</strong></p>
<p>思路还是预先处理前缀和，此外通过记录每个位置i的左右两边的蜡烛边界位置，然后基于前缀和的蜡烛数，来计算给到的查询边界两边对应的蜡烛数。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">platesBetweenCandles</span>(s <span style="color:#458;font-weight:bold">string</span>, queries [][]<span style="color:#458;font-weight:bold">int</span>) []<span style="color:#458;font-weight:bold">int</span> {
</span></span><span style="display:flex;"><span>    n <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">len</span>(s)
</span></span><span style="display:flex;"><span>    preSum <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">make</span>([]<span style="color:#458;font-weight:bold">int</span>, n)
</span></span><span style="display:flex;"><span>    left <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">make</span>([]<span style="color:#458;font-weight:bold">int</span>, n)
</span></span><span style="display:flex;"><span>    sum, l <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">0</span>, <span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> i, ch <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> s {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span> ch <span style="color:#000;font-weight:bold">==</span> <span style="color:#d14">&#39;*&#39;</span> {
</span></span><span style="display:flex;"><span>            sum<span style="color:#000;font-weight:bold">++</span>
</span></span><span style="display:flex;"><span>        } <span style="color:#000;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            l = i
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        preSum[i] = sum
</span></span><span style="display:flex;"><span>        left[i] = l
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    right <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">make</span>([]<span style="color:#458;font-weight:bold">int</span>, n)
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> i, r <span style="color:#000;font-weight:bold">:=</span> n<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>, <span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>; i <span style="color:#000;font-weight:bold">&gt;=</span> <span style="color:#099">0</span>; i<span style="color:#000;font-weight:bold">--</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span> s[i] <span style="color:#000;font-weight:bold">==</span> <span style="color:#d14">&#39;|&#39;</span> {
</span></span><span style="display:flex;"><span>            r = i
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        right[i] = r
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    ans <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">make</span>([]<span style="color:#458;font-weight:bold">int</span>, <span style="color:#0086b3">len</span>(queries))
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> i, q <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> queries {
</span></span><span style="display:flex;"><span>        x, y <span style="color:#000;font-weight:bold">:=</span> right[q[<span style="color:#099">0</span>]], left[q[<span style="color:#099">1</span>]]
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span> x <span style="color:#000;font-weight:bold">&gt;=</span> <span style="color:#099">0</span> <span style="color:#000;font-weight:bold">&amp;&amp;</span> y <span style="color:#000;font-weight:bold">&gt;=</span> <span style="color:#099">0</span> <span style="color:#000;font-weight:bold">&amp;&amp;</span> x &lt; y {
</span></span><span style="display:flex;"><span>            ans[i] = preSum[y] <span style="color:#000;font-weight:bold">-</span> preSum[x]
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> ans
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="最大或值httpsleetcodecnproblemsmaximum-ordescription"><strong><a href="https://leetcode.cn/problems/maximum-or/description/">最大或值</a></strong></h3>
<p><strong>思路</strong></p>
<p>核心的思路是将k次操作都作用在一个数上面，因为一个数的最大k次左移肯定是最优方法了，然选择哪个操作，一次我们遍历一遍，拿到最大值，快速求或操作，因此可以提前左右前缀和思想。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">maximumOr</span>(nums []<span style="color:#458;font-weight:bold">int</span>, k <span style="color:#458;font-weight:bold">int</span>) <span style="color:#458;font-weight:bold">int64</span> {
</span></span><span style="display:flex;"><span>	n <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">len</span>(nums)
</span></span><span style="display:flex;"><span>	suf <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">make</span>([]<span style="color:#458;font-weight:bold">int</span>, n<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">:=</span> n <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>; i &gt; <span style="color:#099">0</span>; i<span style="color:#000;font-weight:bold">--</span> {
</span></span><span style="display:flex;"><span>		suf[i] = suf[i<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>] | nums[i]
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	ans, pre <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">0</span>, <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">for</span> i, x <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> nums {
</span></span><span style="display:flex;"><span>		ans = <span style="color:#900;font-weight:bold">max</span>(ans, pre|x<span style="color:#000;font-weight:bold">&lt;&lt;</span>k|suf[i<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>])
</span></span><span style="display:flex;"><span>		pre <span style="color:#000;font-weight:bold">|=</span> x
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">return</span> <span style="color:#0086b3">int64</span>(ans)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">max</span>(a, b <span style="color:#458;font-weight:bold">int</span>) <span style="color:#458;font-weight:bold">int</span> { <span style="color:#000;font-weight:bold">if</span> a &lt; b { <span style="color:#000;font-weight:bold">return</span> b }; <span style="color:#000;font-weight:bold">return</span> a }
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="二的幂数组中查询范围内的乘积httpsleetcodecnproblemsrange-product-queries-of-powersdescription"><strong><a href="https://leetcode.cn/problems/range-product-queries-of-powers/description/">二的幂数组中查询范围内的乘积</a></strong></h3>
<p><strong>思路</strong></p>
<p>这题有点奇葩，题目都要读半天，原来是将n分解成2的幂的数组，然后求范围值。这里可以学习一下拆解的方法。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">const</span> mod <span style="color:#458;font-weight:bold">int</span> = <span style="color:#099">1e9</span> <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">7</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">productQueries</span>(n <span style="color:#458;font-weight:bold">int</span>, queries [][]<span style="color:#458;font-weight:bold">int</span>) []<span style="color:#458;font-weight:bold">int</span> {
</span></span><span style="display:flex;"><span>	a <span style="color:#000;font-weight:bold">:=</span> []<span style="color:#458;font-weight:bold">int</span>{}
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">for</span> n &gt; <span style="color:#099">0</span> {
</span></span><span style="display:flex;"><span>		lb <span style="color:#000;font-weight:bold">:=</span> n <span style="color:#000;font-weight:bold">&amp;</span> <span style="color:#000;font-weight:bold">-</span>n
</span></span><span style="display:flex;"><span>		a = <span style="color:#0086b3">append</span>(a, lb)
</span></span><span style="display:flex;"><span>		n ^= lb
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	na <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">len</span>(a)
</span></span><span style="display:flex;"><span>	res <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">make</span>([][]<span style="color:#458;font-weight:bold">int</span>, na)
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">for</span> i, x <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> a {
</span></span><span style="display:flex;"><span>		res[i] = <span style="color:#0086b3">make</span>([]<span style="color:#458;font-weight:bold">int</span>, na)
</span></span><span style="display:flex;"><span>		res[i][i] = x
</span></span><span style="display:flex;"><span>		<span style="color:#000;font-weight:bold">for</span> j <span style="color:#000;font-weight:bold">:=</span> i <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>; j &lt; na; j<span style="color:#000;font-weight:bold">++</span> {
</span></span><span style="display:flex;"><span>			res[i][j] = res[i][j<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">*</span> a[j] <span style="color:#000;font-weight:bold">%</span> mod
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	ans <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">make</span>([]<span style="color:#458;font-weight:bold">int</span>, <span style="color:#0086b3">len</span>(queries))
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">for</span> i, q <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> queries {
</span></span><span style="display:flex;"><span>		ans[i] = res[q[<span style="color:#099">0</span>]][q[<span style="color:#099">1</span>]]
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">return</span> ans
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="拿出最少数目的魔法豆httpsleetcodecnproblemsremoving-minimum-number-of-magic-beansdescription"><strong><a href="https://leetcode.cn/problems/removing-minimum-number-of-magic-beans/description/">拿出最少数目的魔法豆</a></strong></h3>
<p><strong>思路</strong></p>
<p>核心思路是最后每个盒子的豆子数值肯定是原数组中的一个数，因为如果不是的话，每个都要再拿肯定结果大了。拿如何快速统计指定数字的剩余数的拿豆子数呢？首先考虑小于指定数，我们肯定全部拿走，大于指定数的呢？拿走的量肯定是总量减去指定数字乘以盒子数，因此我们先排序，然后从小到大遍历，每次遍历的数字就是当前指定数，这样可以快速统计。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">minimumRemoval</span>(beans []<span style="color:#458;font-weight:bold">int</span>) <span style="color:#458;font-weight:bold">int64</span> {
</span></span><span style="display:flex;"><span>    n <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">len</span>(beans)
</span></span><span style="display:flex;"><span>    sort.<span style="color:#900;font-weight:bold">Ints</span>(beans)
</span></span><span style="display:flex;"><span>    total <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">int64</span>(<span style="color:#099">0</span>) <span style="color:#998;font-style:italic">// 豆子总数
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">for</span> _, bean <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> beans {
</span></span><span style="display:flex;"><span>        total <span style="color:#000;font-weight:bold">+=</span> <span style="color:#0086b3">int64</span>(bean)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    res <span style="color:#000;font-weight:bold">:=</span> total <span style="color:#998;font-style:italic">// 最少需要移除的豆子数
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">0</span>; i &lt; n; i<span style="color:#000;font-weight:bold">++</span> {
</span></span><span style="display:flex;"><span>        res = <span style="color:#900;font-weight:bold">min</span>(res, total <span style="color:#000;font-weight:bold">-</span> <span style="color:#0086b3">int64</span>(beans[i]) <span style="color:#000;font-weight:bold">*</span> <span style="color:#0086b3">int64</span>(n <span style="color:#000;font-weight:bold">-</span> i))
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> res
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="等值距离和httpsleetcodecnproblemssum-of-distancesdescription"><strong><a href="https://leetcode.cn/problems/sum-of-distances/description/">等值距离和</a></strong></h3>
<p><strong>思路</strong></p>
<p>首先肯定是需要分组的，然后同一组内怎么一次性计算结果呢？考虑图形的角度看，就是求取i位置上以i为宽，<code>num[i]</code>为高的面积减去累积的面积，因此还是前缀和的思路。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">distance</span>(nums []<span style="color:#458;font-weight:bold">int</span>) []<span style="color:#458;font-weight:bold">int64</span> {
</span></span><span style="display:flex;"><span>	groups <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">map</span>[<span style="color:#458;font-weight:bold">int</span>][]<span style="color:#458;font-weight:bold">int</span>{}
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">for</span> i, x <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> nums {
</span></span><span style="display:flex;"><span>		groups[x] = <span style="color:#0086b3">append</span>(groups[x], i) <span style="color:#998;font-style:italic">// 相同元素分到同一组，记录下标
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>	}
</span></span><span style="display:flex;"><span>	ans <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">make</span>([]<span style="color:#458;font-weight:bold">int64</span>, <span style="color:#0086b3">len</span>(nums))
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">for</span> _, a <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> groups {
</span></span><span style="display:flex;"><span>		n <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">len</span>(a)
</span></span><span style="display:flex;"><span>		s <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">make</span>([]<span style="color:#458;font-weight:bold">int</span>, n<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>		<span style="color:#000;font-weight:bold">for</span> i, x <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> a {
</span></span><span style="display:flex;"><span>			s[i<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>] = s[i] <span style="color:#000;font-weight:bold">+</span> x <span style="color:#998;font-style:italic">// 前缀和
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		}
</span></span><span style="display:flex;"><span>		<span style="color:#000;font-weight:bold">for</span> i, target <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> a {
</span></span><span style="display:flex;"><span>			left <span style="color:#000;font-weight:bold">:=</span> target<span style="color:#000;font-weight:bold">*</span>i <span style="color:#000;font-weight:bold">-</span> s[i] <span style="color:#998;font-style:italic">// 蓝色面积
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>			right <span style="color:#000;font-weight:bold">:=</span> s[n] <span style="color:#000;font-weight:bold">-</span> s[i] <span style="color:#000;font-weight:bold">-</span> target<span style="color:#000;font-weight:bold">*</span>(n<span style="color:#000;font-weight:bold">-</span>i) <span style="color:#998;font-style:italic">// 绿色面积
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>			ans[target] = <span style="color:#0086b3">int64</span>(left <span style="color:#000;font-weight:bold">+</span> right)
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">return</span> ans
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="使数组中的所有元素都等于零httpsleetcodecnproblemsapply-operations-to-make-all-array-elements-equal-to-zerodescription"><strong><a href="https://leetcode.cn/problems/apply-operations-to-make-all-array-elements-equal-to-zero/description/">使数组中的所有元素都等于零</a></strong></h3>
<p><strong>思路</strong></p>
<p>很明显使用差分数组</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">checkArray</span>(nums []<span style="color:#458;font-weight:bold">int</span>, k <span style="color:#458;font-weight:bold">int</span>) <span style="color:#458;font-weight:bold">bool</span> {
</span></span><span style="display:flex;"><span>	n <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">len</span>(nums)
</span></span><span style="display:flex;"><span>	d <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">make</span>([]<span style="color:#458;font-weight:bold">int</span>, n<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>	sumD <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">for</span> i, x <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> nums {
</span></span><span style="display:flex;"><span>		sumD <span style="color:#000;font-weight:bold">+=</span> d[i] <span style="color:#998;font-style:italic">// 差分数组当前累积值
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		x <span style="color:#000;font-weight:bold">+=</span> sumD <span style="color:#998;font-style:italic">// 我们需要这一次扣掉的数值，为了归0
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		<span style="color:#000;font-weight:bold">if</span> x <span style="color:#000;font-weight:bold">==</span> <span style="color:#099">0</span> { <span style="color:#998;font-style:italic">// 无需操作
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>			<span style="color:#000;font-weight:bold">continue</span>
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		<span style="color:#000;font-weight:bold">if</span> x &lt; <span style="color:#099">0</span> <span style="color:#000;font-weight:bold">||</span> i<span style="color:#000;font-weight:bold">+</span>k &gt; n { <span style="color:#998;font-style:italic">// 无法操作
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>			<span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">false</span>
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		sumD <span style="color:#000;font-weight:bold">-=</span> x <span style="color:#998;font-style:italic">// 这次差分要操作的数值，再次加到 sumD 中 
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		d[i<span style="color:#000;font-weight:bold">+</span>k] <span style="color:#000;font-weight:bold">+=</span> x <span style="color:#998;font-style:italic">// 差分的设定，在k之后加回来
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">true</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="所有排列中的最大和httpsleetcodecnproblemsmaximum-sum-obtained-of-any-permutationdescription"><strong><a href="https://leetcode.cn/problems/maximum-sum-obtained-of-any-permutation/description/">所有排列中的最大和</a></strong></h3>
<p><strong>思路</strong></p>
<p>这题正着想会感觉很复杂，但换个方向，既然为了求最大和，那肯定是最大的数使用的次数最多最好，因此可以用差分数组先计算出统计次数然后就可以求的答案了</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Solution</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">def</span> <span style="color:#900;font-weight:bold">maxSumRangeQuery</span>(<span style="color:#999">self</span>, nums: List[<span style="color:#0086b3">int</span>], requests: List[List[<span style="color:#0086b3">int</span>]]) <span style="color:#000;font-weight:bold">-&gt;</span> <span style="color:#0086b3">int</span>:
</span></span><span style="display:flex;"><span>        MODULO <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">10</span><span style="color:#000;font-weight:bold">**</span><span style="color:#099">9</span> <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">7</span>
</span></span><span style="display:flex;"><span>        length <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">len</span>(nums)
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        counts <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">0</span>] <span style="color:#000;font-weight:bold">*</span> length
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> start, end <span style="color:#000;font-weight:bold">in</span> requests:
</span></span><span style="display:flex;"><span>            counts[start] <span style="color:#000;font-weight:bold">+=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span> end <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span> <span style="color:#000;font-weight:bold">&lt;</span> length:
</span></span><span style="display:flex;"><span>                counts[end <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">-=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(<span style="color:#099">1</span>, length):
</span></span><span style="display:flex;"><span>            counts[i] <span style="color:#000;font-weight:bold">+=</span> counts[i <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        counts<span style="color:#000;font-weight:bold">.</span>sort()
</span></span><span style="display:flex;"><span>        nums<span style="color:#000;font-weight:bold">.</span>sort()
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        total <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">sum</span>(num <span style="color:#000;font-weight:bold">*</span> count <span style="color:#000;font-weight:bold">for</span> num, count <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">zip</span>(nums, counts))
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> total <span style="color:#000;font-weight:bold">%</span> MODULO
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="连续的子数组和httpsleetcodecnproblemscontinuous-subarray-sumdescription"><strong><a href="https://leetcode.cn/problems/continuous-subarray-sum/description/">连续的子数组和</a></strong></h3>
<p><strong>思路</strong></p>
<p>这一题的思路很简单，要求和为k，则考虑累加和的mod k操作，加上hash查找快速判断。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">checkSubarraySum</span>(nums []<span style="color:#458;font-weight:bold">int</span>, k <span style="color:#458;font-weight:bold">int</span>) <span style="color:#458;font-weight:bold">bool</span> {
</span></span><span style="display:flex;"><span>    m <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">len</span>(nums)
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> m &lt; <span style="color:#099">2</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">false</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    mp <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">map</span>[<span style="color:#458;font-weight:bold">int</span>]<span style="color:#458;font-weight:bold">int</span>{<span style="color:#099">0</span>: <span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>}
</span></span><span style="display:flex;"><span>    remainder <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> i, num <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> nums {
</span></span><span style="display:flex;"><span>        remainder = (remainder <span style="color:#000;font-weight:bold">+</span> num) <span style="color:#000;font-weight:bold">%</span> k
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span> prevIndex, has <span style="color:#000;font-weight:bold">:=</span> mp[remainder]; has {
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span> i<span style="color:#000;font-weight:bold">-</span>prevIndex <span style="color:#000;font-weight:bold">&gt;=</span> <span style="color:#099">2</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">true</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        } <span style="color:#000;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            mp[remainder] = i
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">false</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="元素和小于等于阈值的正方形的最大边长httpsleetcodecnproblemsmaximum-side-length-of-a-square-with-sum-less-than-or-equal-to-thresholddescription"><strong><a href="https://leetcode.cn/problems/maximum-side-length-of-a-square-with-sum-less-than-or-equal-to-threshold/description/">元素和小于等于阈值的正方形的最大边长</a></strong></h3>
<p><strong>思路</strong></p>
<p>很明显正方形的边长枚举可以用二分快速查找，那确定边长后如何快速计算正方形内的和，需要用到二维前缀和。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Solution</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">def</span> <span style="color:#900;font-weight:bold">maxSideLength</span>(<span style="color:#999">self</span>, mat: List[List[<span style="color:#0086b3">int</span>]], threshold: <span style="color:#0086b3">int</span>) <span style="color:#000;font-weight:bold">-&gt;</span> <span style="color:#0086b3">int</span>:
</span></span><span style="display:flex;"><span>        m, n <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">len</span>(mat), <span style="color:#0086b3">len</span>(mat[<span style="color:#099">0</span>])
</span></span><span style="display:flex;"><span>        P <span style="color:#000;font-weight:bold">=</span> [[<span style="color:#099">0</span>] <span style="color:#000;font-weight:bold">*</span> (n <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>) <span style="color:#000;font-weight:bold">for</span> _ <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(m <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>)]
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(<span style="color:#099">1</span>, m <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>):
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">for</span> j <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(<span style="color:#099">1</span>, n <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>):
</span></span><span style="display:flex;"><span>                P[i][j] <span style="color:#000;font-weight:bold">=</span> P[i <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>][j] <span style="color:#000;font-weight:bold">+</span> P[i][j <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">-</span> P[i <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>][j <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">+</span> mat[i <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>][j <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>]
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">def</span> <span style="color:#900;font-weight:bold">getRect</span>(x1, y1, x2, y2):
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">return</span> P[x2][y2] <span style="color:#000;font-weight:bold">-</span> P[x1 <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>][y2] <span style="color:#000;font-weight:bold">-</span> P[x2][y1 <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">+</span> P[x1 <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>][y1 <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>]
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        l, r, ans <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">1</span>, <span style="color:#0086b3">min</span>(m, n), <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">while</span> l <span style="color:#000;font-weight:bold">&lt;=</span> r:
</span></span><span style="display:flex;"><span>            mid <span style="color:#000;font-weight:bold">=</span> (l <span style="color:#000;font-weight:bold">+</span> r) <span style="color:#000;font-weight:bold">//</span> <span style="color:#099">2</span>
</span></span><span style="display:flex;"><span>            find <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">any</span>(getRect(i, j, i <span style="color:#000;font-weight:bold">+</span> mid <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>, j <span style="color:#000;font-weight:bold">+</span> mid <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>) <span style="color:#000;font-weight:bold">&lt;=</span> threshold <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(<span style="color:#099">1</span>, m <span style="color:#000;font-weight:bold">-</span> mid <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">2</span>) <span style="color:#000;font-weight:bold">for</span> j <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(<span style="color:#099">1</span>, n <span style="color:#000;font-weight:bold">-</span> mid <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">2</span>))
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span> find:
</span></span><span style="display:flex;"><span>                ans <span style="color:#000;font-weight:bold">=</span> mid
</span></span><span style="display:flex;"><span>                l <span style="color:#000;font-weight:bold">=</span> mid <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">else</span>:
</span></span><span style="display:flex;"><span>                r <span style="color:#000;font-weight:bold">=</span> mid <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> ans
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="统计美丽子字符串-ihttpsleetcodecnproblemscount-beautiful-substrings-idescription"><strong><a href="https://leetcode.cn/problems/count-beautiful-substrings-i/description/">统计美丽子字符串 I</a></strong></h3>
<p><strong>思路</strong></p>
<p>这题确实很复杂，包含2个考察点，一个是hash+前缀和，一个是如何判断平方数能够被k整除。
这里主要说明一下第二点，通过质因数分解我们可以知道如果一个平方数能够被k整除则这个平方数需要包含k的质因子的幂数，具体如下。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>如果 n 是一个质数 p 的 e 次幂呢？分类讨论：
</span></span><span style="display:flex;"><span>如果 e 是偶数，比如 n=3^4，那么 L 必须包含因子3^2 ，才能使得L^2能被n整除。
</span></span><span style="display:flex;"><span>此时题目约束就变成了：L是3^2的倍数。
</span></span><span style="display:flex;"><span>如果 e 是奇数，比如n=3^5，那么 L 必须包含因子3^3 ，才能使得L^2能被n整除。此时题目约束就变成了：L是3^3的倍数。
</span></span><span style="display:flex;"><span>所以 L 必须包含因子 p^r，其中 r=⌈e/2⌉=⌊(e+1)/2⌋
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#998;font-style:italic">// 质因子分解，计算模的数
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">pSqrt</span>(n <span style="color:#458;font-weight:bold">int</span>) <span style="color:#458;font-weight:bold">int</span> {
</span></span><span style="display:flex;"><span>	res <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">2</span>; i<span style="color:#000;font-weight:bold">*</span>i <span style="color:#000;font-weight:bold">&lt;=</span> n; i<span style="color:#000;font-weight:bold">++</span> {
</span></span><span style="display:flex;"><span>		i2 <span style="color:#000;font-weight:bold">:=</span> i <span style="color:#000;font-weight:bold">*</span> i
</span></span><span style="display:flex;"><span>		<span style="color:#000;font-weight:bold">for</span> n<span style="color:#000;font-weight:bold">%</span>i2 <span style="color:#000;font-weight:bold">==</span> <span style="color:#099">0</span> {
</span></span><span style="display:flex;"><span>			res <span style="color:#000;font-weight:bold">*=</span> i
</span></span><span style="display:flex;"><span>			n <span style="color:#000;font-weight:bold">/=</span> i2
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		<span style="color:#000;font-weight:bold">if</span> n<span style="color:#000;font-weight:bold">%</span>i <span style="color:#000;font-weight:bold">==</span> <span style="color:#099">0</span> {
</span></span><span style="display:flex;"><span>			res <span style="color:#000;font-weight:bold">*=</span> i
</span></span><span style="display:flex;"><span>			n <span style="color:#000;font-weight:bold">/=</span> i
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">if</span> n &gt; <span style="color:#099">1</span> {
</span></span><span style="display:flex;"><span>		res <span style="color:#000;font-weight:bold">*=</span> n
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">return</span> res
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">beautifulSubstrings</span>(s <span style="color:#458;font-weight:bold">string</span>, k <span style="color:#458;font-weight:bold">int</span>) (ans <span style="color:#458;font-weight:bold">int</span>) {
</span></span><span style="display:flex;"><span>	k = <span style="color:#900;font-weight:bold">pSqrt</span>(k <span style="color:#000;font-weight:bold">*</span> <span style="color:#099">4</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">type</span> pair <span style="color:#000;font-weight:bold">struct</span>{ i, sum <span style="color:#458;font-weight:bold">int</span> }
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">// 由于代码中是从下标 000 开始算第二个前缀和，所以相当于 s[−1]=0
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>	cnt <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">map</span>[pair]<span style="color:#458;font-weight:bold">int</span>{{k <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>, <span style="color:#099">0</span>}: <span style="color:#099">1</span>} <span style="color:#998;font-style:italic">// k-1 和 -1 同余
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>	sum <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">const</span> aeiouMask = <span style="color:#099">1065233</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">for</span> i, c <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> s {
</span></span><span style="display:flex;"><span>		bit <span style="color:#000;font-weight:bold">:=</span> aeiouMask <span style="color:#000;font-weight:bold">&gt;&gt;</span> (c <span style="color:#000;font-weight:bold">-</span> <span style="color:#d14">&#39;a&#39;</span>) <span style="color:#000;font-weight:bold">&amp;</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>		sum <span style="color:#000;font-weight:bold">+=</span> bit<span style="color:#000;font-weight:bold">*</span><span style="color:#099">2</span> <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span> <span style="color:#998;font-style:italic">// 1 -&gt; 1    0 -&gt; -1
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		p <span style="color:#000;font-weight:bold">:=</span> pair{i <span style="color:#000;font-weight:bold">%</span> k, sum}
</span></span><span style="display:flex;"><span>		ans <span style="color:#000;font-weight:bold">+=</span> cnt[p]
</span></span><span style="display:flex;"><span>		cnt[p]<span style="color:#000;font-weight:bold">++</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">return</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="高阶练习">高阶练习</h2>
<h3 id="元素和为目标值的子矩阵数量httpsleetcodecnproblemsnumber-of-submatrices-that-sum-to-targetdescription"><strong><a href="https://leetcode.cn/problems/number-of-submatrices-that-sum-to-target/description/">元素和为目标值的子矩阵数量</a></strong></h3>
<p><strong>思路</strong></p>
<p>还是没有深入理解hash+前缀和，稍微给一个二维的就整不出来了，这里二维的思路是遍历上下两个边界，固定上下边界后，遍历右边边界，计算得到上下右都固定的面积(这里用前缀和)，将面积hash记录，这样后面遍历的时候可以通过hash快速定位到可以构建和为t的左边界个数。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Solution</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">numSubmatrixSumTarget</span><span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span><span style="color:#000;font-weight:bold">[][]</span> mat<span style="color:#000;font-weight:bold">,</span> <span style="color:#458;font-weight:bold">int</span> t<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#458;font-weight:bold">int</span> n <span style="color:#000;font-weight:bold">=</span> mat<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">length</span><span style="color:#000;font-weight:bold">,</span> m <span style="color:#000;font-weight:bold">=</span> mat<span style="color:#000;font-weight:bold">[</span>0<span style="color:#000;font-weight:bold">].</span><span style="color:#008080">length</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#458;font-weight:bold">int</span><span style="color:#000;font-weight:bold">[][]</span> sum <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> <span style="color:#458;font-weight:bold">int</span><span style="color:#000;font-weight:bold">[</span>n <span style="color:#000;font-weight:bold">+</span> 1<span style="color:#000;font-weight:bold">][</span>m <span style="color:#000;font-weight:bold">+</span> 1<span style="color:#000;font-weight:bold">];</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span> i <span style="color:#000;font-weight:bold">=</span> 1<span style="color:#000;font-weight:bold">;</span> i <span style="color:#000;font-weight:bold">&lt;=</span> n<span style="color:#000;font-weight:bold">;</span> i<span style="color:#000;font-weight:bold">++)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span> j <span style="color:#000;font-weight:bold">=</span> 1<span style="color:#000;font-weight:bold">;</span> j <span style="color:#000;font-weight:bold">&lt;=</span> m<span style="color:#000;font-weight:bold">;</span> j<span style="color:#000;font-weight:bold">++)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                sum<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">][</span>j<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">=</span> sum<span style="color:#000;font-weight:bold">[</span>i <span style="color:#000;font-weight:bold">-</span> 1<span style="color:#000;font-weight:bold">][</span>j<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">+</span> sum<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">][</span>j <span style="color:#000;font-weight:bold">-</span> 1<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">-</span> sum<span style="color:#000;font-weight:bold">[</span>i <span style="color:#000;font-weight:bold">-</span> 1<span style="color:#000;font-weight:bold">][</span>j <span style="color:#000;font-weight:bold">-</span> 1<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">+</span> mat<span style="color:#000;font-weight:bold">[</span>i <span style="color:#000;font-weight:bold">-</span> 1<span style="color:#000;font-weight:bold">][</span>j <span style="color:#000;font-weight:bold">-</span> 1<span style="color:#000;font-weight:bold">];</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#458;font-weight:bold">int</span> ans <span style="color:#000;font-weight:bold">=</span> 0<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span> top <span style="color:#000;font-weight:bold">=</span> 1<span style="color:#000;font-weight:bold">;</span> top <span style="color:#000;font-weight:bold">&lt;=</span> n<span style="color:#000;font-weight:bold">;</span> top<span style="color:#000;font-weight:bold">++)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span> bot <span style="color:#000;font-weight:bold">=</span> top<span style="color:#000;font-weight:bold">;</span> bot <span style="color:#000;font-weight:bold">&lt;=</span> n<span style="color:#000;font-weight:bold">;</span> bot<span style="color:#000;font-weight:bold">++)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#458;font-weight:bold">int</span> cur <span style="color:#000;font-weight:bold">=</span> 0<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>                Map<span style="color:#000;font-weight:bold">&lt;</span>Integer<span style="color:#000;font-weight:bold">,</span> Integer<span style="color:#000;font-weight:bold">&gt;</span> map <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> HashMap<span style="color:#000;font-weight:bold">&lt;&gt;();</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span> r <span style="color:#000;font-weight:bold">=</span> 1<span style="color:#000;font-weight:bold">;</span> r <span style="color:#000;font-weight:bold">&lt;=</span> m<span style="color:#000;font-weight:bold">;</span> r<span style="color:#000;font-weight:bold">++)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                    cur <span style="color:#000;font-weight:bold">=</span> sum<span style="color:#000;font-weight:bold">[</span>bot<span style="color:#000;font-weight:bold">][</span>r<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">-</span> sum<span style="color:#000;font-weight:bold">[</span>top <span style="color:#000;font-weight:bold">-</span> 1<span style="color:#000;font-weight:bold">][</span>r<span style="color:#000;font-weight:bold">];</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span>cur <span style="color:#000;font-weight:bold">==</span> t<span style="color:#000;font-weight:bold">)</span> ans<span style="color:#000;font-weight:bold">++;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span>map<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">containsKey</span><span style="color:#000;font-weight:bold">(</span>cur <span style="color:#000;font-weight:bold">-</span> t<span style="color:#000;font-weight:bold">))</span> ans <span style="color:#000;font-weight:bold">+=</span> map<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">get</span><span style="color:#000;font-weight:bold">(</span>cur <span style="color:#000;font-weight:bold">-</span> t<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>                    map<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">put</span><span style="color:#000;font-weight:bold">(</span>cur<span style="color:#000;font-weight:bold">,</span> map<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getOrDefault</span><span style="color:#000;font-weight:bold">(</span>cur<span style="color:#000;font-weight:bold">,</span> 0<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">+</span> 1<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> ans<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="得分最高的最小轮调httpsleetcodecnproblemssmallest-rotation-with-highest-scoredescription"><strong><a href="https://leetcode.cn/problems/smallest-rotation-with-highest-score/description/">得分最高的最小轮调</a></strong></h3>
<p><strong>思路</strong></p>
<p>这题的核心思路是圈定每个位置可以移动的范围，然后根据差分数组来确定最大的收益移动点。
首先分析位置i可进行移动k后的得分情况。</p>
<p>对于数组 nums 中的元素 x，当 x 所在下标大于或等于 x 时，元素 x 会记 1 分。因此元素 x 记 1 分的下标范围是 <code>[x,n−1]</code>，有 <code>n−x</code> 个下标，元素 x 不计分的下标范围是 <code>[0,x−1]</code>，有 x 个下标。</p>
<p>假设元素 x 的初始下标为 i，则当轮调下标为 k 时，元素 x 位于下标 <code>(i−k+n) mod n</code>。如果元素 x 记 1 分，则有 <code>(i−k+n) mod n≥x</code> ，等价于 <code>k≤(i−x+n) mod  n</code>，由于<code>(i−k+n) mod  n &lt;= n-1</code> 因此有 <code>k≥(i+1) mod n</code></p>
<p>将取模运算去掉之后，可以得到 k 的实际取值范围：</p>
<p>当 <code>i&lt;x</code> 时，<code>i+1≤k≤i−x+n</code></p>
<p>当 <code>i≥x</code> 时，<code>k≥i+1 或 k≤i−x</code></p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Solution</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">static</span> <span style="color:#458;font-weight:bold">int</span> N <span style="color:#000;font-weight:bold">=</span> 100010<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">static</span> <span style="color:#458;font-weight:bold">int</span><span style="color:#000;font-weight:bold">[]</span> c <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> <span style="color:#458;font-weight:bold">int</span><span style="color:#000;font-weight:bold">[</span>N<span style="color:#000;font-weight:bold">];</span>
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">add</span><span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span> l<span style="color:#000;font-weight:bold">,</span> <span style="color:#458;font-weight:bold">int</span> r<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        c<span style="color:#000;font-weight:bold">[</span>l<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">+=</span> 1<span style="color:#000;font-weight:bold">;</span> c<span style="color:#000;font-weight:bold">[</span>r <span style="color:#000;font-weight:bold">+</span> 1<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">-=</span> 1<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">bestRotation</span><span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span><span style="color:#000;font-weight:bold">[]</span> nums<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        Arrays<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">fill</span><span style="color:#000;font-weight:bold">(</span>c<span style="color:#000;font-weight:bold">,</span> 0<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#458;font-weight:bold">int</span> n <span style="color:#000;font-weight:bold">=</span> nums<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">length</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span> i <span style="color:#000;font-weight:bold">=</span> 0<span style="color:#000;font-weight:bold">;</span> i <span style="color:#000;font-weight:bold">&lt;</span> n<span style="color:#000;font-weight:bold">;</span> i<span style="color:#000;font-weight:bold">++)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#458;font-weight:bold">int</span> a <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">(</span>i <span style="color:#000;font-weight:bold">-</span> <span style="color:#000;font-weight:bold">(</span>n <span style="color:#000;font-weight:bold">-</span> 1<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">+</span> n<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">%</span> n<span style="color:#000;font-weight:bold">,</span> b <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">(</span>i <span style="color:#000;font-weight:bold">-</span> nums<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">+</span> n<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">%</span> n<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span>a <span style="color:#000;font-weight:bold">&lt;=</span> b<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                add<span style="color:#000;font-weight:bold">(</span>a<span style="color:#000;font-weight:bold">,</span> b<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">}</span> <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                add<span style="color:#000;font-weight:bold">(</span>0<span style="color:#000;font-weight:bold">,</span> b<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>                add<span style="color:#000;font-weight:bold">(</span>a<span style="color:#000;font-weight:bold">,</span> n <span style="color:#000;font-weight:bold">-</span> 1<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span> i <span style="color:#000;font-weight:bold">=</span> 1<span style="color:#000;font-weight:bold">;</span> i <span style="color:#000;font-weight:bold">&lt;=</span> n<span style="color:#000;font-weight:bold">;</span> i<span style="color:#000;font-weight:bold">++)</span> c<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">+=</span> c<span style="color:#000;font-weight:bold">[</span>i <span style="color:#000;font-weight:bold">-</span> 1<span style="color:#000;font-weight:bold">];</span>
</span></span><span style="display:flex;"><span>        <span style="color:#458;font-weight:bold">int</span> ans <span style="color:#000;font-weight:bold">=</span> 0<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span> i <span style="color:#000;font-weight:bold">=</span> 1<span style="color:#000;font-weight:bold">;</span> i <span style="color:#000;font-weight:bold">&lt;=</span> n<span style="color:#000;font-weight:bold">;</span> i<span style="color:#000;font-weight:bold">++)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span>c<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">&gt;</span> c<span style="color:#000;font-weight:bold">[</span>ans<span style="color:#000;font-weight:bold">])</span> ans <span style="color:#000;font-weight:bold">=</span> i<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> ans<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="k-连续位的最小翻转次数httpsleetcodecnproblemsminimum-number-of-k-consecutive-bit-flipsdescription"><strong><a href="https://leetcode.cn/problems/minimum-number-of-k-consecutive-bit-flips/description/">K 连续位的最小翻转次数</a></strong></h3>
<p><strong>思路</strong></p>
<p>思路很简单感觉，首先连续 k 的翻转，很明显会利用差分数组，记录翻转次数，我们最后效果是全部为1，因此就直接左到右的翻转，每次判断当前的最终翻转状态，判断是否需要翻转，要的话通过差分数组对之后的影响计数。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">minKBitFlips</span>(nums []<span style="color:#458;font-weight:bold">int</span>, k <span style="color:#458;font-weight:bold">int</span>) (ans <span style="color:#458;font-weight:bold">int</span>) {
</span></span><span style="display:flex;"><span>    n <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">len</span>(nums)
</span></span><span style="display:flex;"><span>    diff <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">make</span>([]<span style="color:#458;font-weight:bold">int</span>, n<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>    revCnt <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> i, v <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> nums {
</span></span><span style="display:flex;"><span>        revCnt <span style="color:#000;font-weight:bold">+=</span> diff[i]
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">// 0 则表示要翻转
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#000;font-weight:bold">if</span> (v<span style="color:#000;font-weight:bold">+</span>revCnt)<span style="color:#000;font-weight:bold">%</span><span style="color:#099">2</span> <span style="color:#000;font-weight:bold">==</span> <span style="color:#099">0</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">// 无法实现差分累加，说明没法实现 ，返回-1
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            <span style="color:#000;font-weight:bold">if</span> i<span style="color:#000;font-weight:bold">+</span>k &gt; n {
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">// 翻转次数+1
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            ans<span style="color:#000;font-weight:bold">++</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">// 差分从当前累加，需要加1
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            revCnt<span style="color:#000;font-weight:bold">++</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">// 消除k之后的影响
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            diff[i<span style="color:#000;font-weight:bold">+</span>k]<span style="color:#000;font-weight:bold">--</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="最大化城市的最小电量httpsleetcodecnproblemsmaximize-the-minimum-powered-citydescription"><strong><a href="https://leetcode.cn/problems/maximize-the-minimum-powered-city/description/">最大化城市的最小电量</a></strong></h3>
<p><strong>思路</strong></p>
<p>题干是说给定一个数组，每个位置对应已有的电站个数，我们还可以放置k个，每个电站的影响范围是左右两边r距离，怎么放置让最小电量最大化。
还是没有熟悉二分，看大佬题解，这种最小最大问题是很经典的二分问法，我们同个二分来确定最值，然后用差分数组来计算能不能达到这个最值，有个一问题是放置的位置在哪里？这里还有贪心的概念，我们从左遍历到右，每次确保至少有最值的电量，放置位置则指定到尽可能覆盖的点，即往右看r距离为放置点。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">maxPower</span>(stations []<span style="color:#458;font-weight:bold">int</span>, r <span style="color:#458;font-weight:bold">int</span>, k <span style="color:#458;font-weight:bold">int</span>) <span style="color:#458;font-weight:bold">int64</span> {
</span></span><span style="display:flex;"><span>	n <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">len</span>(stations)
</span></span><span style="display:flex;"><span>	sum <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">make</span>([]<span style="color:#458;font-weight:bold">int</span>, n<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>) <span style="color:#998;font-style:italic">// 前缀和，遍历第一轮，辅助计算每个位置的电量
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>	<span style="color:#000;font-weight:bold">for</span> i, x <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> stations {
</span></span><span style="display:flex;"><span>		sum[i<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>] = sum[i] <span style="color:#000;font-weight:bold">+</span> x
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	mn <span style="color:#000;font-weight:bold">:=</span> math.MaxInt
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> stations {
</span></span><span style="display:flex;"><span>		stations[i] = sum[<span style="color:#900;font-weight:bold">min</span>(i<span style="color:#000;font-weight:bold">+</span>r<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>, n)] <span style="color:#000;font-weight:bold">-</span> sum[<span style="color:#900;font-weight:bold">max</span>(i<span style="color:#000;font-weight:bold">-</span>r, <span style="color:#099">0</span>)] <span style="color:#998;font-style:italic">// 电量
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		mn = <span style="color:#900;font-weight:bold">min</span>(mn, stations[i])
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">return</span> <span style="color:#0086b3">int64</span>(mn <span style="color:#000;font-weight:bold">+</span> sort.<span style="color:#900;font-weight:bold">Search</span>(k, <span style="color:#000;font-weight:bold">func</span>(minPower <span style="color:#458;font-weight:bold">int</span>) <span style="color:#458;font-weight:bold">bool</span> {
</span></span><span style="display:flex;"><span>		minPower <span style="color:#000;font-weight:bold">+=</span> mn <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span> 
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">// 改为二分最小的不满足要求的值，这样 sort.Search 返回的就是最大的满足要求的值
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		diff <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">make</span>([]<span style="color:#458;font-weight:bold">int</span>, n) <span style="color:#998;font-style:italic">// 差分数组
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>		sumD, need <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">0</span>, <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000;font-weight:bold">for</span> i, power <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> stations {
</span></span><span style="display:flex;"><span>			sumD <span style="color:#000;font-weight:bold">+=</span> diff[i] <span style="color:#998;font-style:italic">// 累加差分值
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>			m <span style="color:#000;font-weight:bold">:=</span> minPower <span style="color:#000;font-weight:bold">-</span> power <span style="color:#000;font-weight:bold">-</span> sumD
</span></span><span style="display:flex;"><span>			<span style="color:#000;font-weight:bold">if</span> m &gt; <span style="color:#099">0</span> { <span style="color:#998;font-style:italic">// 需要 m 个供电站
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>				need <span style="color:#000;font-weight:bold">+=</span> m
</span></span><span style="display:flex;"><span>				<span style="color:#000;font-weight:bold">if</span> need &gt; k { <span style="color:#998;font-style:italic">// 提前退出这样快一些
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>					<span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">true</span> <span style="color:#998;font-style:italic">// 不满足要求
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>				}
</span></span><span style="display:flex;"><span>				sumD <span style="color:#000;font-weight:bold">+=</span> m <span style="color:#998;font-style:italic">// 差分更新
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>				<span style="color:#000;font-weight:bold">if</span> i<span style="color:#000;font-weight:bold">+</span>r<span style="color:#000;font-weight:bold">*</span><span style="color:#099">2</span><span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span> &lt; n {
</span></span><span style="display:flex;"><span>					diff[i<span style="color:#000;font-weight:bold">+</span>r<span style="color:#000;font-weight:bold">*</span><span style="color:#099">2</span><span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">-=</span> m <span style="color:#998;font-style:italic">// 差分更新
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>				}
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		<span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">false</span>
</span></span><span style="display:flex;"><span>	}))
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">min</span>(a, b <span style="color:#458;font-weight:bold">int</span>) <span style="color:#458;font-weight:bold">int</span> { <span style="color:#000;font-weight:bold">if</span> b &lt; a { <span style="color:#000;font-weight:bold">return</span> b }; <span style="color:#000;font-weight:bold">return</span> a }
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">max</span>(a, b <span style="color:#458;font-weight:bold">int</span>) <span style="color:#458;font-weight:bold">int</span> { <span style="color:#000;font-weight:bold">if</span> b &gt; a { <span style="color:#000;font-weight:bold">return</span> b }; <span style="color:#000;font-weight:bold">return</span> a }
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="执行操作使频率分数最大httpsleetcodecnproblemsapply-operations-to-maximize-frequency-scoredescription"><strong><a href="https://leetcode.cn/problems/apply-operations-to-maximize-frequency-score/description/">执行操作使频率分数最大</a></strong></h3>
<p><strong>思路</strong></p>
<p>由于对位置没有限制，因此我们先排序后考虑，如何让频率大的值最大，我们利用滑动窗口来处理遍历流程 ，将窗口内的数组部分尽可能的最多，因此我们选窗口中间的数，如何快速计算窗口内的数组要配置的数额，则可以通过前缀和快速求取。</p>
<p><strong>代码</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">maxFrequencyScore</span>(nums []<span style="color:#458;font-weight:bold">int</span>, K <span style="color:#458;font-weight:bold">int64</span>) (ans <span style="color:#458;font-weight:bold">int</span>) {
</span></span><span style="display:flex;"><span>	k <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">int</span>(K)
</span></span><span style="display:flex;"><span>	slices.<span style="color:#900;font-weight:bold">Sort</span>(nums)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	n <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">len</span>(nums)
</span></span><span style="display:flex;"><span>	sum <span style="color:#000;font-weight:bold">:=</span> <span style="color:#0086b3">make</span>([]<span style="color:#458;font-weight:bold">int</span>, n<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">for</span> i, v <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> nums {
</span></span><span style="display:flex;"><span>		sum[i<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>] = sum[i] <span style="color:#000;font-weight:bold">+</span> v
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#998;font-style:italic">// 把 nums[l] 到 nums[r] 都变成 nums[i]
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>	distanceSum <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">func</span>(l, i, r <span style="color:#458;font-weight:bold">int</span>) <span style="color:#458;font-weight:bold">int</span> {
</span></span><span style="display:flex;"><span>		left <span style="color:#000;font-weight:bold">:=</span> nums[i]<span style="color:#000;font-weight:bold">*</span>(i<span style="color:#000;font-weight:bold">-</span>l) <span style="color:#000;font-weight:bold">-</span> (sum[i] <span style="color:#000;font-weight:bold">-</span> sum[l])
</span></span><span style="display:flex;"><span>		right <span style="color:#000;font-weight:bold">:=</span> sum[r<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">-</span> sum[i<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">-</span> nums[i]<span style="color:#000;font-weight:bold">*</span>(r<span style="color:#000;font-weight:bold">-</span>i)
</span></span><span style="display:flex;"><span>		<span style="color:#000;font-weight:bold">return</span> left <span style="color:#000;font-weight:bold">+</span> right
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	left <span style="color:#000;font-weight:bold">:=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">:=</span> <span style="color:#000;font-weight:bold">range</span> nums {
</span></span><span style="display:flex;"><span>		<span style="color:#000;font-weight:bold">for</span> <span style="color:#900;font-weight:bold">distanceSum</span>(left, (left<span style="color:#000;font-weight:bold">+</span>i)<span style="color:#000;font-weight:bold">/</span><span style="color:#099">2</span>, i) &gt; k {
</span></span><span style="display:flex;"><span>			left<span style="color:#000;font-weight:bold">++</span>
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		ans = <span style="color:#900;font-weight:bold">max</span>(ans, i<span style="color:#000;font-weight:bold">-</span>left<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">return</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div>
        </div>

        


        

<div class="post-archive">
    <h2>相关文章</h2>
    <ul class="listing">
        
        <li><a href="/post/2024-01-20-pythonrequests/">python|requests</a></li>
        
        <li><a href="/post/2023-12-13-python%E5%AD%A6%E4%B9%A0%E8%B7%AF%E5%BE%84/">python|学习路径</a></li>
        
        <li><a href="/read/2023-11-18-%E8%80%81%E4%BF%9E%E5%AF%B9%E8%B0%88%E5%BD%95/">老俞对谈录阅读笔记</a></li>
        
        <li><a href="/read/2023-10-25-%E6%95%85%E4%BA%8B%E8%AF%BE/">故事课</a></li>
        
        <li><a href="/read/2023-10-25-%E9%9B%AA%E8%8A%B1%E5%86%99%E4%BD%9C%E6%B3%95/">雪花写作法</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            没有标签
            
        </div>
    </article>
    
    

    
    
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "weiweng/blog"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
    
    
    

</div>

                    <footer id="footer">
    <div>
        &copy; 2024 <a href="https://weiweng.top">weiweng的博客 By weiweng</a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='//cdn.bootcdn.net/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>


<style type="text/css">
div.highlight {
    position: relative;
    margin: 1em 0px;
}

.copy-code {
    display: none;
    position: absolute;
    top: 4px;
    right: 4px;
    color: rgba(255, 255, 255, 0.8);
    background: rgba(78, 78, 78, 0.8);
    border-radius: var(--radius);
    padding: 0 5px;
    font: inherit;
    user-select: none;
    cursor: pointer;
    border: 0;
    --radius: 8px;
}

div.highlight:hover .copy-code,pre:hover .copy-code {
    display: block;
}

</style>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>






                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://weiweng.top/search' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://weiweng.top">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>

    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://weiweng.top/post/2024-05-06-%E5%B9%B6%E6%9F%A5%E9%9B%86/" title="算法专题|并查集" target="_blank">算法专题|并查集</a>
    </li>
    
    <li>
        <a href="https://weiweng.top/post/2024-03-15-golanggrroupcache/" title="Golang|groupcache" target="_blank">Golang|groupcache</a>
    </li>
    
    <li>
        <a href="https://weiweng.top/post/2024-03-09-golangreflect/" title="Golang|学习教程(八)-反射" target="_blank">Golang|学习教程(八)-反射</a>
    </li>
    
    <li>
        <a href="https://weiweng.top/post/2024-01-22-%E5%89%8D%E7%BC%80%E5%92%8C/" title="算法专题|前缀和" target="_blank">算法专题|前缀和</a>
    </li>
    
    <li>
        <a href="https://weiweng.top/post/2024-01-20-pythonrequests/" title="python|requests" target="_blank">python|requests</a>
    </li>
    
    <li>
        <a href="https://weiweng.top/post/2023-12-13-python%E5%AD%A6%E4%B9%A0%E8%B7%AF%E5%BE%84/" title="python|学习路径" target="_blank">python|学习路径</a>
    </li>
    
    <li>
        <a href="https://weiweng.top/post/2023-09-08-%E5%9B%BE/" title="算法专题|图" target="_blank">算法专题|图</a>
    </li>
    
    <li>
        <a href="https://weiweng.top/post/2023-06-26-%E8%B4%AA%E5%BF%83/" title="算法专题|贪心" target="_blank">算法专题|贪心</a>
    </li>
    
    <li>
        <a href="https://weiweng.top/post/2023-06-16-%E5%8D%95%E8%B0%83%E6%A0%88/" title="算法专题|单调栈" target="_blank">算法专题|单调栈</a>
    </li>
    
    <li>
        <a href="https://weiweng.top/post/2023-06-16-%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/" title="算法专题|滑动窗口" target="_blank">算法专题|滑动窗口</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href='/categories/'>分类</a></h3>
<ul class="widget-list">
    
    <li><a href="https://weiweng.top/categories/Golang/">Golang (28)</a></li>
    
    <li><a href="https://weiweng.top/categories/MQ/">MQ (3)</a></li>
    
    <li><a href="https://weiweng.top/categories/Python/">Python (4)</a></li>
    
    <li><a href="https://weiweng.top/categories/Redis/">Redis (9)</a></li>
    
    <li><a href="https://weiweng.top/categories/k8s/">k8s (3)</a></li>
    
    <li><a href="https://weiweng.top/categories/linux/">linux (2)</a></li>
    
    <li><a href="https://weiweng.top/categories/mysql/">mysql (21)</a></li>
    
    <li><a href="https://weiweng.top/categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1/">微服务 (3)</a></li>
    
    <li><a href="https://weiweng.top/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统 (1)</a></li>
    
    <li><a href="https://weiweng.top/categories/%E7%AE%97%E6%B3%95%E4%B8%93%E9%A2%98/">算法专题 (10)</a></li>
    
    <li><a href="https://weiweng.top/categories/%E7%AE%97%E6%B3%95%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">算法&amp;数据结构 (36)</a></li>
    
    <li><a href="https://weiweng.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络 (1)</a></li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href='/tags/'>标签</a></h3>
<div class="tagcloud">
    
    <a href="https://weiweng.top/tags/awk/">awk</a>
    
    <a href="https://weiweng.top/tags/curl/">curl</a>
    
    <a href="https://weiweng.top/tags/find/">find</a>
    
    <a href="https://weiweng.top/tags/git/">git</a>
    
    <a href="https://weiweng.top/tags/grep/">grep</a>
    
    <a href="https://weiweng.top/tags/item2/">item2</a>
    
    <a href="https://weiweng.top/tags/nginx/">nginx</a>
    
    <a href="https://weiweng.top/tags/sed/">sed</a>
    
    <a href="https://weiweng.top/tags/shell/">shell</a>
    
    <a href="https://weiweng.top/tags/tmux/">tmux</a>
    
    <a href="https://weiweng.top/tags/uml/">uml</a>
    
    <a href="https://weiweng.top/tags/vim/">vim</a>
    
    <a href="https://weiweng.top/tags/%E5%AD%A6%E4%B9%A0/">学习</a>
    
    <a href="https://weiweng.top/tags/%E5%BC%80%E6%BA%90%E5%8D%8F%E8%AE%AE/">开源协议</a>
    
    <a href="https://weiweng.top/tags/%E5%BF%83%E5%BE%97/">心得</a>
    
    <a href="https://weiweng.top/tags/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E6%8A%80%E5%B7%A7/">搜索引擎技巧</a>
    
</div>
    </section>

    
<section class="widget">
    <h3 class="widget-title">友情链接</h3>
    <ul class="widget-list">
        
        <li>
            <a target="_blank" href="https://www.flysnow.org/" title="飞雪无情的博客">飞雪无情的博客</a>
        </li>
        
        <li>
            <a target="_blank" href="https://draveness.me/" title="面向信仰编程">面向信仰编程</a>
        </li>
        
        <li>
            <a target="_blank" href="https://xargin.com/" title="No Headback">No Headback</a>
        </li>
        
        <li>
            <a target="_blank" href="https://eddycjy.com/" title="煎鱼的博客">煎鱼的博客</a>
        </li>
        
        <li>
            <a target="_blank" href="https://polarisxu.studygolang.com/" title="polarisxu的博客">polarisxu的博客</a>
        </li>
        
        <li>
            <a target="_blank" href="https://qcrao.com/" title="qcrao 的博客">qcrao 的博客</a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://weiweng.top/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>